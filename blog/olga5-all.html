<!DOCTYPE html>
<html lang="ru">

<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<title>olga5-all</title>
	<!-- <link rel="shortcut icon" href="+../blog/favicon.svg" type="image/x-icon"> -->

	<link data-href="+../blog/favicon.svg" type="image/x-icon" rel="shortcut icon olga5" />
	<link data-href='+o5ini.css' media='screen' rel='stylesheet' />

	<!-- варианты размещения библиотеки
		src='https://rombase.neocities.org/olga5/o5com!.js'   # 'промышленная' эксплуатация
		src='https://rombase.h1n.ru/o5/olga5/o5com!.js'       # отладка на моём сервере
		src='http://localhost/o5/olga5/o5com!.js'             # локальная отладка
	-->
	<script src='../olga5/o5.js' o5consts="o5debug='0'; o5nomnu='0'; o5noact='0';" o5urlrfs="
			тесты='+ ../olga5-tests';
			блог_o5='https://olga-5.blogspot.com/2020/02';
			images=_url_olga5 + ../blog/media/image;       
			# _url_html='# адрес текущей страницы (этот и 2 следующих - закомментированы)';
			# _url_root='# адрес сайта с текущей страницей';
			# _url_olga5='# адрес загрузки файла o5com!.js';
		">
		</script>

	<script data-src='+o5shp!.js'></script>
	<script data-src='+o5pop.js'></script>
	<script data-src='+o5mnu.js' scrollY='-32'></script>

	<script data-src='+o5ref.js' o5tag_attrs="img=image_play;a,img,audio=href,data-href,src,_src;" o5urlrfs="  
			sounds=https://archive.org/download/clouds_20200310;
			myTunes-icon=images + /myMusikIT.png               # --- только для o5snd ---;
			Ceza1-25=sounds+/Ceza1-25.mp3;
			мой-блог=https://ariturlearn..blogspot.com/2017/02/;   # --- только для o5shp ---;			
		">
		</script>
	<script data-src='+o5snd!.js' btn_play='images + /play.png' btn_stop='images + /play_Freepik.png'></script>
	<script data-src='+add/pusto.js' moe-attr='мой атрибут'></script>

	<link data-href='+../blog/csss/olga5.tableCode.css' media='screen' rel='stylesheet' />
	<link data-href='+../blog/csss/olga5.textNshow.css' media='screen' rel='stylesheet' />
	<link data-href='+../blog/csss/olga5.addStyles.css' media='screen' rel='stylesheet' />
	<link data-href='+../blog/csss/olga5.menuPopDn.css' media='screen' rel='stylesheet' />
	<link data-href='+../blog/csss/olga5.tableKuplet.css' media='screen' rel='stylesheet' />
</head>

<body>
	<div id='olga5Start' class="olga5_Start:o5shp,o5pop,o5mnu" dir="ltr" trbidi="on">
		<img alt="" border="0" width="200" style="display:none" data-original-height="599" data-original-width="662"
			src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj3368Zm1cDrYNB31cB8ZgTvqX-oFl4e_fDG__JfwU_sLerz6HwVGwHjKFNdpuTwZh5X9tlnBVUvruSz48HoOoegNMEfaP5E6nxtZL8CrHFub6JaHgBRMW-xFTwWrGZby-0AvLvEZQ28Qq4-66Ne7P0UgvSNwmk3MYIKKFECDgIXYpJfKQNIciQrUDA/s200/all.png" />

		<p class="olga5_page_header">
			Библиотека <code>Olga5</code> расширения динамического функционала страниц HTML
		</p>

		<h3 id='head_1'>1. Общие сведения</h3>
		<p>
			<span class="olga5_popup" o5popup='+ ./help/o5help.html; width: 555, height: 390'>Библиотека</span>&nbsp;
			расширяет динамические возможности веб-страниц создаваемых в <b>Blogger</b>'е и отдельных HTML-документах.
		</p>
		<p>
			Библиотека <code>Olga5</code> является пятой версией набора <b>js</b>-скриптов, первоначально написанных
			для технической поддержки лучшего блога изучения турецкого языка
			<a title="Лучший блог изучения турецкого языка и не только" href="https://turkish4dummies1.blogspot.com/"
				target="olga5-addPage">"Турецкий язык для (не)особо
				одаренных"</a>
			и названа именем его автора, руководившей разработкой всего функционала этой <i>библиотеки</i>.
		</p>
		<p>
			Библиотека имеет модульную структуру, состоящую из <code>ядра</code>, обеспечивающего
		<ul>
			<li>подключение тегов &lt;script&gt; и &lt;link&gt; <i>библиотеки</i>;</li>
			<li>обработку именованных адресных <i>ссылок</i></li>
		</ul>
		и расширяемого набора функциональных <i>модулей</i>,
		что позволяет авторам страниц подключать (а также и самостоятельно разрабатывать)
		лишь необходимый функционал.
		</p>

		<h4 id='head_11'>1.1. Модули <i>библиотеки</i></h4>
		<p>
			Модуль представляет собой анонимную <b>js</b>-функцию, которая может подключаться как в виде отдельного
			скрипта
			(и в этом случае здесь понятия <i>модуль</i> и <i>скрипт</i> - эквивалентны),
			так и быть включеной в скомпилированный (см. п.&nbsp;2.2) скрипт.
			Модули выполняются при каждом обновлении страницы <b>html</b>-документа.
			В данной версии представлены функциональные модули (скрипты) :
		</p>
		<ul>
			<li><a href="_url_html+olga5-snd.html" target="olga5-addPage"><code>o5snd.js</code></a> &mdash;
				1подключение воспроизведения аудио, к тегам (<b>img</b>, <b>p</b>, <b>span</b> и иным) страницы;</li>
			<li><a href="_url_html+/olga5-ref.html" target="olga5-addPage"><code>o5ref.js</code></a> &mdash;
				подстановка <i>ссылок</i> в указанные теговые атрибуты странцы;</li>
			<li><a href="_url_html+/olga5-shp.html" target="olga5-addPage"><code>o5shp.js</code></a> &mdash;
				обеспечение `зависания` блочных DOM-объектов при скроллинге страницы;</li>
			<li><a href="_url_html+/olga5-pop.html" target="olga5-addPage"><code>o5pop.js</code></a> &mdash;
				создание всплывающих окон для демонстрации примеров программ;</li>
			<li><a href="_url_html+/olga5-inc.html" olga5-addPage"><code>o5inc.js</code></a> &mdash;
				вставка в html-документ фрагментов html-фрагментов из других файлов (на том же сервере);</li>
			<li><a href="_url_html+/olga5-mnu.html" target="olga5-addPage"><code>o5mnu.js</code></a> &mdash;
				отображение меню документа;</li>
			<li><a href="_url_html+/olga5-tab.html" target="olga5-addPage"><code>o5mnu.js</code></a> &mdash;
				формирование таблиц (тегов &lt;table&gt;);</li>
			<li><code>o5ini.css</code> &mdash; информирование (миганием тега <b>body</b>) о процессе загрузки модулей.
			</li>
		</ul>
		<p>
			Скрипты написаны по одному шаблону и API <i>библиотеки</i> позволяют создавать и подключать новые скрипты,
			как описано
			<span o5popup='+../blog/olga5-all.html?o5nomnu#head_3; width: 666, height: 444'> ниже</span>&nbsp;.
			При <span title="как по-отдельности, так и в скомпилирванном файле">подключении</span>
			скриптов они могут задаваться в произвольной очередности.
		</p>
		<p class='moecomment'>
			Для уточнения выделенного слова,- здесь это 'подключении', наведите на него курсор,
			а для открытия ссылки (здесь это 'ниже') кликните по ней.
		</p>
		<p id="depends">
			Инициализация скриптов после (загрузки страницы) выполняется в последоветельности,
			определяемой атрибутом <b><b>o5depends</b></b> с соблюдением следующих рекомендаций:
		</p>
		<ul>
			<li><code>ядро</code> (его базовый скрипт <b>o5com.js</b> либо скомпилированные скрипты <b>o5com!.js</b> или
				<b>o5.js</b>)
				должно обязательно быть
				<span
					title="в предыдущей версии наоборот - ядро д.б. быть последним, поэтому если заметите где такое утверждение,- сообщите автору об ошибке!">первым</span>;
			</li>
			<li>скрипт <b>o5inc.js</b>
				<span
					title="если вставляемые фрагменты должны будут обрабатываться иными скриптами">рекомендуется</span>
				всегда будет запускаться первым (при наличии тегов с атрибутом <b>o5include</b>);
			</li>
			<li>скрипт <b>o5snd.js</b>
				<span
					title="если именованные ссылки в аудио-тегах предполагается обрабатывать 'o5ref'">желательно</span>
				запускать после отработки <b>o5ref.js</b>;
			</li>
			<li>обработку подвисаний в <b>o5shp.js</b>
				<span title="если документ содержит подвисабельные иконки с именованными ссылками">желательно</span>
				выполнять после подстановки <i>ссылок</i> в скриптах <b>o5snd.js</b> и <b>o5ref.js</b>;
			</li>
		</ul>
		<p>Пример подключения (к блогу) всех скриптов со всеми их предопределёнными параметрами можно посмотреть
			<code class="olga5_popup" onmouseup="window.olga5.PopShow( 555, 555, '+/help/blogger.html')">здесь</code>.
		</p>

		<h4 id='head_12'>1.2. Инкапсуляция <b>CSS</b>
		</h4>
		<p>
			Разработанные файлы скриптов, кроме собственных <b>js</b>-кодов, <u>включают</u> в себя необходимые им
			<b>CSS</b>-описания,
			из которых автоматически создаются теги &lt;<b>style</b>&gt; в заголовке &lt;<b>head</b>&gt; HTML-документа
			(их <b>id</b> содержат имя класса и префикс '_internal').
			Разумеется, такая <i>инкапсуляция</i> не является обязательной и (при написании новых скриптов)
			можно традиционно создавать соответствующие теги &lt;<b>link</b>&gt;.
		</p>
		<p>
			При инкапсуляции сжатие
			<span
				title="пока решил не включать, чтобы легче было анализировать вставленные CSS">не&nbsp;делается</span>,
			но из встроенных в код CSS'ов удаляются <i title="части строк, начинающиеся '//'">мои</i> комментарии и
			лишние пробелы справа.
		</p>
		<p>
			Предлагаемая <i>инкапсуляция</i> <b>CSS</b>'ов ускоряет загрузку <i>библиотеки</i> за счет меньшего
			количества тегов
			&lt;<b>link</b>&gt;.
			Бонус - их обработка выполняется уже после загрузки тела документа. Поэтому встроенные <b>CSS</b>-правила
			оказываются размещенными <u>после</u> остальных стилей в заголовке документа. Тем самым дают возможность
			переопределить иные стили,- например динамически создаваемые <b>Blogger</b>'ом.
		</p>

		<h4 id='head_13'>1.3. Использование <i>именованных</i> <i>ссылок</i>
		</h4>
		<p>
			В модулях <i>библиотеки</i> (в дополнение к стандартному тегу
			<span id='span1' class="olga5_popup" onclick="window.olga5.PopUp(this, 
				'https://ru.w3docs.com/uchebnik-html/html-teg-base.html', 'width:720, height:800')">&lt;<b>base</b>&gt;
			</span>)
			широко используются т.н. именованные <i>ссылки</i>,
			когда часть (или <i>части</i>) строки <b>url</b>'а заменяется символическим именем,
			определённым в атрибуте '<b>o5urlrfs</b>' (см. ниже п.&nbsp;6) скрипта ядра библиотеки.
			Например, в строке:
		</p>
		<p class="olga5_codeTextSeparate">
			&lt;a id="a1" <b>href</b>="<b>_url_html</b> + olga5-all.html"&gt;ссылка 'a1'&lt;/a&gt;
		</p>
		<p>
			в теговском атрибуте <b>href</b> используется <i>ссылка</i> <b>_url_html</b>.
			Если в значении атрибута слева от '<b>+</b>' не указано ничего, то там предполагается значение
			<i>ссылки</i> <b>_url_olga5</b> (эта ссылка, как и <b>_url_html</b>, описаны ниже в п.&nbsp;6.2).
		</p>
		<p class="moecomment">
			Хотя пробелы вокруг подстрок игнорируются, однако рекомендуется избегать их,
			т.к. формально они недопустимы в адресных строках и, например,
			<b>Blogger</b> отказывался сохранять тексты с такой т.с. <i>ошибкой</i>
		</p>
		<p>
			Подробное описание этих ссылок приведено
			<span title="Использование <i>именованных</i> <i>ссылок</i> в библиотеке <code>Olga5</code>"
				class="olga5_popup"
				onmouseup="window.olga5.PopShow( 666, 555, '+./help/urlrfs.html?o5nomnu')">здесь</span>.
		</p>

		<h4 id='head_14'>1.4. Системные требования</h4>
		<p>
			Корректная работа <i>библиотеки</i> ограничена <b>HTML-5</b>-документами (т.е. начинающимися декларацией
			<b>&lt;!DOCTYPE html&gt;</b>)
			в браузерах,
			поддерживающих <a href="https://www.w3schools.com/js/js_es6.asp" target="olga5-addPage">ECMAScript-2015</a>
			(т.е. примерно начиная
			после 2015 года).
			В данной <i>библиотеке</i> не используются никакие иные библиотеки,- только чистый <b>js</b>.
			Её работа проверялась под Windows 10 в
			<span title="Version 85.0.564.51 (64-bit)">Microsoft Edge</span>,
			<span title="Version 85.0.4183.102 (64-bit)">Google Chrome</span>,
			<span title="Version 80.0.1 (64-bit)">Mozilla Firefox</span>,
			и
			<span title="Version 70.0.3728.178 (64-bit)">Opera</span>.
		</p>

		<h3 id='head_2'>2. Подключение тегов &lt;script&gt; и &lt;link&gt; <i>библиотеки</i></h3>
		<p>
			<i title='точнее её ядро,- o5com!.js'>Библиотека</i> выполняет
			'<i><b
					title="будет выполнен 'пересчет' реальных адресов файлов с учетом именованных ссылок">преобразование</b></i>'
			адресов а также
			контролирует загрузку и выполнение тегов &lt;<b>script</b>&gt;,
			размещенных в секции &lt;<b>head</b>&gt;, для которых
			выполняется хотя бы одно из <i>условий</i>:
		</p>
		<ul>
			<li>значение <span title="т.е. атрибута 'src' или 'href'">адреса</span>
				содержит символ '<b>+</b>', указывающий на использование <i>именованной</i> ссылки;
			</li>
			<li>значение адреса не содержит ни символа '<b>/</b>', ни '<b>.</b>', т.е. само является
				<i>именованной</i> ссылкой;
			</li>
			<li>задан атрибут <b>data-src</b> или <b>_src</b>, маскирующие стандартный атрибут <b>src</b>;</li>
			<li>имя файла начинается символами '<b>o5</b>'.</li>
		</ul>

		<p>
			Если задан параметр
			<b title="с ненулевым значениием; подробности - см. п.&nbsp;6.2">o5only</b>
			то песледнее условие (о наличии '<b>o5</b>' в начале имени) является обязательным.
		</p>
		<p>
			Атрибут <b>data-src</b> имеют приоритет над <b>_src</b> и оба - над <b>src</b>.
			Различие между <b>data-src</b> и <b>_src</b> проявляется только тогда,
			когда модуль подключаемый тегом &lt;<b>script</b>&gt; уже содержится в скомпилированном
			файле <b>o5.js</b>. В таких случаях задание <b>_src</b>, всегда приводящее
			к переопределению стандартного атрибута <b>src</b>, вызывает лишние/повторные загрузки скриптов модулей.
			Значение же атрибута <b>data-src</b> в этих случаях игнорируется и задекларированный &lt;<b>script</b>&gt;
			остаётся без ненужной загрузки.
		</p>
		<p>
			Для тегов &lt;<b>link</b>&gt; обработка почти аналогична вышеизложенному, подразумевая '<b>href</b>' вместо
			'<b>src</b>'.
			Отличие - окончание загрузки этих тегов не контролируется (и не синхронизируется).
		</p>
		<p>
			Теги &lt;<b>script</b>&gt; подключаемых скриптов должны располагаться в секции <b>head</b>
			HTML-документа.
			После создания документа (и/или при его обновлениях) скрипт <code>o5com!.js</code> (ядро
			<i>библиотеки</i>)
			будет выполнять инициализацию остальных функциональных скриптов в очерёдности их расположения в
			документе.
		</p>
		<p>
			При ошибках инициализации выдаётся итоговое сообщение
			"<span style="background: yellow;"><i>Ошибки инициализации скриптов</i></span>" (на желтом фоне),
			с перечислением недоинициализированных скриптов.
		</p>
		<p class="moeattention">
			большинство сообщений, выдаваемые на цветном поле, являются <i>расрываемыми</i>, о чем сигнализирует
			маленький треугольник слева отних.
			После клика на такое сообщения выдаётся уточняющая информция.
		</p>
		<p>
			Причинами ошибок могут быть:
		</p>
		<ul>
			<li>неодинаковость наименования файла скрипта и значения параметра
				<b>olga5_modul</b> (см. ниже п.3.1);
			</li>
			<li>синтаксические ошибки в скрипте, выдаваемые в <i>console</i> (после соответствующей строки "}--->
				загружен")</li>
			<li>незавершенность загрузок дополнительных файлов, инициированных самим скриптом</li>
		</ul>
		<p>
			Специфические аспекты подключения <i>библиотеки</i> к <b>Blogger</b>'у описаны
			<code class="olga5_popup"
				onmouseup="window.olga5.PopShow( 600, 444, '+../blog/olga5-blog.html')">здесь</code>.
		</p>

		<h4 id='head_21'>2.1. Пример подключения скриптов</h4>
		<p>
			<code class="olga5_popup" onmouseup="window.olga5.PopShow( 450, 355, 'тесты+/all2.html')">Пример</code>
			подключения нескольких файлов скриптов в секции &lt;<b>head</b>&gt; HTML-страницы:
		</p>

		<div id="kst">
			<!-- height: fit-content -->
			<table class="olga5_tableCode olga5_shp" id='tab-1' style="height: fit-content" olga5_owners="id:kst">
				<tbody>
					<tr>
						<td>
							<pre>&nbsp;<br/>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9<br/>10<br/>11<br/>12<br/>13<br/>14<br/>15<br/>16<br/>17<br/>18<br/>19<br/>20</pre>
						</td>
						<td>
							<pre>
<span class="olga5_tableName">секция &lt;<b>head</b>&gt;</span>
&lt;head&gt;
  &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt;
  &lt;title&gt;all2&lt;/title&gt;
  &lt;link rel="shortcut icon" href="+../blog/favicon.svg" type="image/x-icon"&gt;

&lt;link href='+<code>o5ini.css</code>' media='screen' rel='stylesheet'/&gt;

&lt;script src='../olga5/<code>o5com!.js</code>' 
    o5consts="o5debug=1;"
    o5urlrfs="_url_olga5 = '../olga5/';"
&gt;&lt;/script&gt;
&lt;script data-src='+<code>o5snd.js</code>'
    o5urlrfs="
        btn_stop = '_url_olga5 + ../blog/media/image/myMusikIT.png';
        музоны   = _url_olga5 + ../blog/media; tt = музоны + /tt;
        btnSound = '_url_olga5 + ../blog/media/image/play.png';
    " 
&gt;&lt;/script&gt;
&lt;script _src='+<code>o5shp.js</code>'&gt;&lt;/script&gt;
&lt;/head&gt;
</pre>
						</td>
					</tr>
				</tbody>
			</table>
			<p>
				Это <i>важный</i> пример, т.к. на него будут еще ссылки ниже по тексту.
				Посмотреть протокол его работы можно открыв для него отладчик браузера.
			</p>
			Пояснения к (некоторым) строкам файла:
			<ul>
				<li><b>&nbsp;&nbsp;6</b> &mdash; первым указан необязательный <b>link</b> на <code>o5ini.css</code>,
					содержащий описание класса, <span title="на время инициализации">временно</span> подключаемого
					к тегу <b>body</b> при инициализации страницы для визуальной сигнализации состояния загрузки
					<i>библиотеки</i>.
				</li>
				<li><b>&nbsp;8</b> &mdash; первым всегда
					должен быть скрипт ядра библиотеки ( <code>o5com!.js</code> или <code>o5com.js</code>).
					Адрес этого скрипта не должен содержать символ '<b>+</b>' и именованные ссылки.
					Обычно он определяет нахождение всех остальных <b>библиотечных</b> скриптов:
				</li>
				<li><b>12, 19</b> &mdash; подключение функциональных скриптов.
					Символы '<b>+</b>' в значениях адреса показывают,
					что эти скрипты берутся там же, где и скрипт ядра <i>библиотеки</i>
					(точнее,- согласно значения атрибута <b>_url_olga5</b>, предполагаемого слева
					от '<b>+</b>' - см.п.&nbsp;6.2)
					;</li>
				<li><b>&nbsp;&nbsp;12</b> &mdash; показана загрузка скрипта атрибутом <b>data-src</b>.
					В <u title="т.е. с не-скомпилированной библиотекой">данном</u> примере эффект использования
					префиксов '<b><i>_</i></b>' (в стр. 15) и '<b><i>data-</i></b>' одинаков:
					<code>ядро</code> формирует
					соответствующий атрибут <b>src</b> (или <b>href</b> у тегов &lt;<b>link</b>&gt;) и перезагружает
					тег.
					Ниже, в п.п 2.2 и 3.2 изложены причины целесообразности такого <i>маскирования</i>
					при использовании именованных
					<span class="olga5_popup"
						onmouseup="window.olga5.PopShow( 666, 555, '+./help/urlrfs.html?o5nomnu#head_1')">ссылок</span>;
				</li>
				<li><b>&nbsp;&nbsp;19</b> &mdash; скрипт имеет атрибут <b>_src</b> чтобы
					отладчик не 'ругался' на неопределённый (изначально) адрес "+o5shp.js;</li>
				<li><b>14&div;16</b> &mdash; показано задание именованных <i>ссылок</i>
					(<b>btn_stop</b>, <b>музоны</b> и <b>btnSound</b>)
					с <span title="тут, перед символом '+' можно не указывать, т.к. и так подразумевается">явным</span>
					использованием ссылки <b>_url_olga5</b>. </li>
			</ul>
			<p>Атрибуты <b>o5consts</b> и <b>o5urlrfs</b>, в которых обычно передаются параметры (константы и ссылки)
				модулей, описаны ниже в п.6.
			</p>
		</div>
		<h4 id='head_22'>2.2. Компиляция скриптов</h4>
		<p>
			Для оптимизации загрузки <i>библиотеки</i> её
			<code>*.js</code>-скрипты могут <i>компилироваться</i>/<i>объединяться</i> в один файл.
			Компиляция выполняется простым сложением содержимого
			<span title="т.е. только тех модулей библиотеки, которые нужны для данной страницы/блога">требуемых</span>
			файлов в очерёдности их ожидаемого выпонения.
			Скрипт с <code>ядром</code> должен быть первым среди компилируемых
			<!-- Содержимое скрипта <code>o5com!.js</code> (или <code>o5com.js</code>,- т.е. ядра библиотеки) должно быть первым.
			Итоговый файл далее называется '<code>o5.js</code>'. -->
		</p>
		<p>
			Компилироваться может как вся <i>библиотека</i>, так и её отдельные модули:
			<b>o5shp</b>, <b>o5snd</b>, <b>o5dbg</b> и <b>o5com</b> (само ядро библиотеки). Это вызвано тем, что
			из-за значительных объёмов кода каждый из перечисленных модулей разделен на базовый и подгружаемые скрипты.
			Это показалось удобным при отладке, но при эксплуатации требует повышенного траффика.
			Названия скриптов скомпилированных модулей должны заканчиваться обязательным символом '<b>!</b>', например
			<b>o5com!.js</b>, однако название скрипта всей скомпилированной библиотеки м.б. без него, если он
			называется <b>o5.js</b>. 
		</p>
		<p>
			Предлагается всегда <i>компилировать</i> скрипты основных модулей в единый
			<span title="название произвольно">файл</span> <code>o5.js</code>,
			а уж потом параметром <b>o5incls </b> указывать те из них, которые будут инициироваться.
			Дополнительно к этому можно еще в <b>html</b>-документе указывать области действия инициализации
			каждого из модулей (см. ниже п.&nbsp;4.3.).
		</p>
		<p>
			Было замечено 4-кратное ускорение загрузки (без обфускации) при
			<span title="необходимость дозагрузки объектов страницы и длительность работы 
				самих скриптов нивелирует эту разницу">минимальной</span> обработке страницы.
			С дальнейшей же обфускацией скомпилированного файла имеются сложности: модули библиотеки
			без ошибок минимизировались <span title="среди более чем десятка найденных в Интернете">только</span>
			этим <a href="https://codebeautify.org/minify-js" target="olga5-addPage">codebeautify.org</a>
			(и, может быть, ещё этим <a href="https://www.uglifyjs.net/" target="olga5-addPage">uglifyjs.net</a>)
			онлайн сервисом. При этом реальный эффект от неё в браузере
			<span title="Version 90.0.4430.85 (Official Build) (64-bit) под Linux'ом">Chrome</span> мною не замечен.
		</p>
		<p>Результирующий файл <code>o5.js</code> в <b>Linux</b> можно создать,
			например, таким командным
			<code class="olga5_popup" onmouseup="window.olga5.PopShow( 555, 422, '+/o5_L.cmd')">файлом</code>.
			Расширение <i>cmd</i> у него не обязательно,
			однако: первой строкой д.б. '<i>#!/bin/bash</i>'; после символов продолжения строки '<b>\</b>'
			не должно ничего быть;  файл
			должен быть сделан исполняемым (командой "<i>chmod +x ...</i>" или редактированием его свойств).
			Очерёдность включаемых скриптов лучше не менять.
		</p>
		<p>В <b>Windows</b> файл <code>o5.js</code> можно создать,
			например, таким командным
			<code class="olga5_popup" onmouseup="window.olga5.PopShow( 555, 422, '+/o5_W.cmd')">файлом</code>,
			в котором следует использовать именно команду <b>type</b> а не <b>copy</b>.
		</p>
		<p class="moecomment">
			Очерёдность включения скриптов <u>существенна</u> и указана согласно их взаимной зависимости
			(см. <span title=""
				onmouseup="window.olga5.PopShow( 666, 555, '_url_html+./olga5-all.html?o5nomnu#depends')">п.
				1.1</span>)

			Кроме <code>o5.js</code> дополнительно (с демонстрационными целями) компилируются и промежуточные модули,-
			<b>o5dbg!.js</b>, <b>o5shp!.js</b>, <b>o5snd!.js</b> и <b>o5com!.js</b>.
		</p>

		<p>
			После компиляции <i>библиотека</i> может подключаться как в <i>развёрнутом</i>, так и в <i>сокращенном</i>
			виде.
		</p>
		<p>
			<code title="без тегов <title>, <meta> и т.п." class="olga5_popup"
				onmouseup="window.olga5.PopShow( 450, 355, 'тесты+/all2c.html')">Пример</code>
			выполнения <i>развёрнутого</i> подключения объединённого файла почти идентичен показанному в
			<span class="olga5_popup"
				onmouseup="window.olga5.PopShow( 600, 355, '?o5nomnu#head_21')">п.&nbsp;2.1</span>,

			где лишь вместо ссылки на <code>o5com!.js</code> (в стр. 8) была записана ссылка на <code>o5.js</code>.
			При этом фактически загружаться будет только файл <code>o5.js</code>
			т.к. адреса остальных скриптов заданы атрибутом <b>data-src</b> (но не <b>src</b> либо <b>_src</b>).
		</p>
		<p class="moecomment">
			Посмотреть реальные подключения можно открыв (для вызванного примера) системный журнал и в закладке <i>Elements</i> 
			прочитать содержимое тега &lt;<b>html</b>&gt;. А в закладке <i>Network</i> можно увидеть перечень загружаемых скриптов.
		</p>
		<p>
			<code title="без тегов <title>, <meta> и т.п." class="olga5_popup"
				onmouseup="window.olga5.PopShow( 450, 355, 'тесты+/all2cc.html')">Пример</code>
			выполнения <i>сокращённого</i> подключения объединённого файла:
		</p>
		<table class="olga5_tableCode">
			<tbody>
				<tr>
					<td>
						<pre>&nbsp;<br/>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9<br/>10<br/>11<br/>12<br/>13</pre>
					</td>
					<td>
						<pre>
<span class="olga5_tableName">объединённый файл №1</span>
&lt;script src='../olga5/o5.js' 
    o5debug=1 
    _url_olga5 = '../olga5/'
    <b>btn_stop</b>  = кнопка_stop
    <b>o5tag_attrs</b>= 'img= src,_src,data-src,data_src'
    o5urlrfs = '
        музоны=_url_olga5 + ../blog/media;
        tt = музоны + /tt;
        btnSound = _url_olga5 + ../blog/media/image/play.png;
        кнопка_stop = _url_olga5 + ../blog/media/image/myMusikIT.png
    '
&gt;&lt;/script> 
&lt;script data-src='+o5inc.js'&gt;&lt;/script&gt;
</pre>
					</td>
				</tr>
			</tbody>
		</table>
		<p>
			Здесь задан скомпилированный файл <code>o5.js</code> с отладочным скриптом.
			Дополнительные атрибуты остальных скриптов (<b>btn_stop</b> и <b>o5tag_attrs</b> )
			подключены к вызову скомпилированного скрипта.
			В суммарный скрипт '<code>o5.js</code>' исходные скрипты добавлялись в
			<span title="в предполагаемой очерёдности их выполнения-инициализации">последовательности</span>&nbsp;
			предыдущего примера
			<span title="" class="olga5_popup"
				onmouseup="window.olga5.PopShow( 666, 555, '_url_html+./olga5-all.html?o5nomnu#head_21')">п.
				2.1</span>.
		</p>
		<p class='moecomment'>
			Показанный тут дополнительный файл <code>o5inc.js</code> используется лишь для организации примеров.
			Он позволяет избежать дублирования содержимого тега <b>body</b> при показе вариантов подключения скриптов.
		</p>
		<p>
			<i>Развёрнутый</i> способ представляется более удобным (при отладке библиотеки),
			т.к. для переключения между исходным и скомпилированным вариантами
			достаточно лишь поменять наименование скрипта ядра
			и не заморачиваться с редактированием/подменой всего <b>head</b>-заголовка.
		</p>
		<p>
			<b>Рекомендуется</b> для всех <u title="за исключением скрипта 'o5com!.js'">функциональных</u>
			<i>библиотечных</i> скриптов (и <b>css</b>-линков) с именованными ссылками
			<u>всегда</u> задавать адрес именно через '<b>_src</b>' либо '<b>data-src</b>'. Во-первых,
			при использовании именованных ссылок не будет попыток загрузки '<i>ошибочного</i>'
			значения атрибута <b>src</b>.
			А во-вторых,- подключение скриптов к документу остаётся неизменным
			независимо от того, указан ли последним (содержащим ядро <i>библиотtки</i>) скриптом файл
			<code>o5com!.js</code>
			или скомпилированный модуль <code>o5.js</code>.
		</p>
		<p class='moecomment'><b>
				Вообще, для всех тегов документа, содержащих <i>именованные</i> ссылки следует задавать адрес именно
				через '<b>_src</b>' (либо '<b>data-src</b>'), что сократит время обработки страницы за счет исключения
				попыток загрузки "неправильных" адресов.</b>
		</p>
		<h4><b title="разумными представляются либо полная компиляция, либо вообще без компиляции">Извращения</b>
			компиляции...</h4>
		<p>
			Кроме полной компиляции <i>библиотеки</i> можно компилировать только часть скриптов,-
			подключая некоторые модули индивидуально, а некоторые - в скомпилированном виде.
			Собственно, само <i>библиотечное</i> ядро,- файл <code>o5com!.js</code>, тоже скомпилировано
			из белее мелких
			<span
				title="модули 'Consol', 'Params', 'Apicom', 'Encode', 'InitO5' и 'Events',- находятся в подпапке 'o5com'">модулей</span>,
			которые совместно обрабатывают структуру <b>window.olga5</b>.
		</p>
		<p>
			Примеры с различными вариантами (краткие пояснения приведены на страницах этих примеров) подключения
			скомпилированных скриптов можно посмотреть тут:
			<code class="olga5_popup"
				onmouseup="window.olga5.PopShow( 300, 333, 'тесты+/all2_.html')">all2_.html</code>,
			<code class="olga5_popup" onmouseup="window.olga5.PopShow( 300, 333, 'тесты+/all2c.html')">all2c.html</code>
			и
			<code class="olga5_popup"
				onmouseup="window.olga5.PopShow( 300, 333, 'тесты+/all2cc.html')">all2cc.html</code>,
			а перечни подгружаемых модулей можно проверить на закладках <i>Network</i> отладчика браузера
			В примере
			<code class="olga5_popup" onmouseup="window.olga5.PopShow( 300, 333, 'тесты+/all2a.html')">all2a.html</code>
			показано подключение скомпилированных <i>скриптов</i> <code>o5shp!.js</code> и <code>o5dbg!.js</code>,
			при котором не потребуется последующая
			(автоматическая) подгрузка скриптов, включаемых в <i>модули</i> <code>o5shp</code> и <code>o5dbg</code>
		</p>

		<h4 id='head_23'>2.3. Информирование об ошибках</h4>
		<p>
			В модулях библиотеки предусмотрена выдача на
			<span title="в отладочный протокол 'console.log'">консоль</span>
			сообщений диагностики и об ошибках.
			Подробность диагностики определяется параметром <b>o5debug</b> (смотри
			<span o5popup='+ ../blog/olga5-all.html?o5nomnu#head_62; width: 666, height: 444'>п.&nbsp;6.2</span>).
			Сообщения же об ошибках выдаются всегда, независимо от значения <b>o5debug</b>.
		</p>
		<p class="moecomment">
			В адресной строке вместо <b>o5debug</b> можно писать просто <b>debug</b> (также там вместо <b>o5nomnu</b> можно <b>nomenu</b>)
		</p>
		<p>
			Тексты сообщений об ошибках выводятся на жёлтом фоне, а критические ошибки еще и обрамляются рамкой.
			После клика на сообщение может появиться дополнительная информация.
		</p>
		<p>
			Общее <b>правило</b>: при неожидаемой работе библиотеки следует прочитать <i>console.log</i>
			и, раскрыв (кликом) все сообщения на желтом фоне, найти и устранить выявленные ошибки.
			Желательно при этом открывать страницу с
			<span title="в адресной строке или атрибутом/параметром скрипта">заданием</span>
			<b>o5debug</b>=1 (или 2).
		</p>

		<h3 id='head_3'>3. Создание новых скриптов</h3>
		<p>
			Скрипты созданы по единому шаблону, позволяющему расширять <i>библиотеку</i>.
			Каждый скрипт есть отдельный <code>js</code>-файл, содержащий анонимную,
			автоматически исполняемую в <code>o5com!.js</code>, функцию.
			Ссылки на <i title="т.е. на описания загруженных скриптов">такие функции</i>,
			описывающий дополнительно подгружаемые модули
			сохраняются в виде массива в объекте <b>window</b>['<code>Olga5</code>'].
		</p>

		<h4 id='head_31'>3.1. Пример нового скрипта</h4>
		<p>
			Код создания нового скрипта в простейшем варианте может иметь вид:
		</p>

		<div id="ks1">
			<table id="ks11" class="olga5_shp olga5_tableCode olga5_scroll" style="height:222px"
				olga5_frames="i:olga5-Start_hr" olga5_owners="id:ks1">
				<tbody>
					<tr>
						<td>
							<pre>&nbsp;<br/>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9<br/>10<br/>11<br/>12<br/>13<br/>14<br/>15<br/>16<br/>17<br/>18<br/>19<br/>20<br/>21<br/>22<br/>23<br/>24<br/>25<br/>26<br/>27<br/>28<br/>29<br/>30<br/>31<br/>32<br/>33<br/>34<br/>35<br/>36</pre>
						</td>
						<td>
							<pre>
<span class="olga5_tableName">Код создания скрипта '<b>pusto.js</b>'</span>
(function () {              // ---------------------------------------------- pusto ---
    'use strict';
    let C = null    // если нужна ссылка на <code>ядро</code> для использования её API
    const
        W = {
            modul: 'pusto',         // уникальное имя модуля 'W' для регистрации
            Init: WndInit,          // функция, вызываемая при инициализации 'W'
            /* необязательные параметры  */
            Done: null,						// функция, вызываемая по завершении работы
            class: 'olga5_pusto',           // CSS-класс выделения тегов для обработки модулем
            consts: 'xyz=3.14; moe-attr=?', // список констант модуля - для задания атрибутами
            urlrfs: '',                     // список именованных ссылок -"-
        },
        
        /*  Константы, функции и обработчики событий - требуемые в "WndInit(c)" */
        o5css = `   // необязательный встраиваемый CSS-класс для модуля 
            .${W.class} { cursor: pointer; animation: none; }
            // ... иные CSS-описания
        `,
        _srcEmpty = 'about:blank'  // пример некоей константы

	function WndInit(c) { 		// определение парамеров модуля и заморозка 'W'
		if (c) {				// т.к. 'c' не определено при автономном вызове 
			if (!W.isReady) c.ParamsFill(W, o5css) 	// при отсутствии 'o5css' - c.ParamsFill(W)
			C = c
		}
		// ... иные функции/операторы инициализации заданные внутри  "WndInit(c)"

		/* информирование ядра библиотеки о завершении инициализации */
		// console.log(` инициирован:  ${W.modul}.js`)
		window.dispatchEvent(new CustomEvent('olga5_sinit', { detail: { modul: W.modul } }))
	}

	/* Информирование ядра библиотеки об окончании загрузки модуля */
	C.ModulAdd(W, {})
})();
</pre>
						</td>
					</tr>
				</tbody>
			</table>
			<p>
				В приведенном примере имена констант и переменных произвольны.
				<br />
				Пояснения к приведенному <i>коду</i>:
			</p>
			<ul>
				<li>&nbsp;<b>5&divide;13</b> &mdash; структура описания модуля, сохраняемая в
					<i>общебиблиотечном</i> объекте <b>window.olga5</b>,- см. стр. 35.
					Имя модуля должно совпадать с именем файла скрипта (если этот файл подгружается отдельно);
				</li>
				<li><b>15&divide;20</b> &mdash; примеры задания скриптовых констант, функций и т.д.,
					где <b>16&divide;19</b> - пример вставки <b>CSS</b>-описания непосредственно в скрипт;</li>

				<li><b>22&divide;32</b> &mdash; обязательная функция (передаваемая выше в строке 7) инициализации
					скрипта, вызываемая при
					инициализации страницы.</li>
				<li><b>35</b> &mdash; информирование <code>o5com!.js</code> о загрузке модуля данного
					скрипта с передачей его описания.</li>
			</ul>
		</div>
		<p>
			Имя <i>модуля</i> однозначно определяет имя файла скрипта,- добавлением расширения '<b>.js</b>'
			(т.е. здесь будет <b>pusto.js</b>).
			Кроме того оно задает
			<span title="относительно папки, содержащей вызывающий скрипт">относительное</span>
			название подпапки <span title="при наличии таковых">подгружаемых</span> файлов.
			При несовпадении имени файла скрипта с именем модуля (дополненным расширением '<b>.js</b>')
			<code>ядро</code> 'не дождётся'
			<span title="если файл подгружается индивидуально, а не включен в скомпилированный модуль">загрузки</span>
			файла и выдаст сообщение об ошибке его загрузки;
		</p>
		<p>
			Приведенный (в строках 16&divide;19) пример <b>CSS</b>-описания записывается в стандартном формате.
			Это позволяет, при желании, легко (зачем-то) скопипастить его в отдельный файл, подключаемый тегом
			&lt;<b>link</b>&gt;.
		</p>
		<p>
			Функция <b>WndInit</b> будет вызываться автоматически <code>ядром</code>
			после каждого события обновления страницы.
			В простейшем случае таким событием
			будет завершение загрузки страницы, однако при подключению к <b title="нпример в Dynamic pusto.js">Blogger</b>'у ситуация может усложниться...
		</p>


		<h4 class='_olga5_shp:k' id='head_32'>3.2. Подключение нового скрипта</h4>
		<p>
			Для иллюстрации подключения нового скрипта в подпапке <b>./add</b> создан файл <b>pusto.js</b>
			c содержимым последнего примера.
			Для ознакомления с его подключением и загрузкой следует кликнуть по ссылке:
			<code class="olga5_popup" onmouseup="window.olga5.PopShow( 333, 111, '+/add/pusto.html')">пример №3</code>.
		</p>
		<p>
			Подключение нового скрипта <code>pusto.js</code> может быть выполнено так:
		</p>
		<p class="olga5_codeTextSeparate">
			&lt;script data-src='+ /add/<b>pusto</b>.js' <b>moe-attr</b>='мой атрибут'&gt;&lt;/script&gt;
		</p>
		<p>
			Символ '<b title="с адресацией относительно ядра, заданного где-то выше">+</b>' тут <u>необходим</u>, чтобы ядро 'заметило' сей скрипт,
			а параметр <b>moe-attr</b> добавлен просто для иллюстации. Посмотреть подробности можно в <i>console.log</i> открытого <i>окошка</i>.
		</p>
		<p class='moecomment'>
			<b>Напоминание-1</b>: чтобы избежать ложных '<b><i>404</i></b>'-х сообщений можно в тегах <b>script</b>
			<span
				title="если указать с 'пустым' значением, браузер подставит адрес текущей страницы">не&nbsp;указывать</span>
			атрибут <b>src</b>,
			а вместо него задавать <b>data-src</b> (или, эквивалентное тут <b>_src</b>), содержащий требуемую ссылку.
		</p>
		<p class='moecomment'>
		<b>Напоминание-2</b>: <code>ядро</code> признаёт "своими" скриптами только те
			из вышерасположенных скриптов, которые либо начинаются
			'<b>o5</b>' (например могло бы быть <b>o5pusto.js</b>),
			либо в значении атрибута <b>src</b> как-нибудь присутствует символ '<b>+</b>'. Поэтому здесь везде пишется
			примерно как :
			<span class='olga5_codeText'> src='<b>+</b> /add/pusto.js' </span>.
		</p>
		<p>
			После добавления нового скрипта желательно указать его зависимость от других скриптов <i>библиотеки</i>
			заданием <i>атрибута</i> <b>o5depends</b> при вызове, либо подкорректировав умалчиваемое значение
			<i>параметра</i> <b>o5depends</b> прямо в скрипте <b>o5com.js</b> (либо в скомпилированном скрипте
			<b>o5com!.js</b> или <b>o5.js</b>).
		</p>

		<h4 id='head_33'>3.3. Подключение к тегам документа</h4>
		<p>
			Чтобы подключить к некоторому тегу обработку одним или несколькими скриптами <i>библиотеки</i>,
			в его теговый атрибут '<b>class</b>' добавляются соответствующие классы.
			Например, для обработки скриптом <code>pusto.js</code> - класс
			'<b>olga5_pusto</b>' (это название задано в стр.6 примера п.&nbsp;3.1.), для
			<code>o5snd.js</code> - класс '<b>olga5_snd</b>' и так далее.
		</p>
		<p>
			Наименование каждого добавляемого класса может сопровождаться квалификаторами, разделяемыми символами
			'<b>:</b>'.
			Подробнее написано в документации по соответствующим модулям.
		</p>

		<h3 id='head_4'>4. Организация выполнения скриптов</h3>
		<p>
			Скрипты выполняются в два этапа.
			На первом этапе после объявления тега &lt;<b>script</b>&gt; выполняется загрузка скрипта.
			Об окончании загрузки должно быть сообщено <code>ядру</code>, как показанно в
			<span o5popup='+../blog/olga5-all.html?o5nomnu#ks1; width: 666, height: 444'> стр. 35 </span>)
			(тут и ниже ссылки даются на строки примера <i>Код создания скрипта</i> в п.3.1).
			На втором этапе, который наступает по окончании загрузки документа, выполняются программы инициализаций
			скриптов (например, указанная в стр. 7).
		</p>

		<h4 id='head_41'>4.1. Первый этап - загрузка</h4>
		<p>
			Коды <i>библиотечных</i> скриптов (здесь речь идёт только о них) загружаются независимо друг от друга.
			Специальное задание атрибутов <b>async</b> не имеет смысла, т.к. он автоматически добавляется в теги
			подгружаемых скриптов,
			а при их обработке учитывается только очерёдность объявления скриптов в документе и в атрибуте
			<b>o5depends</b>.
		</p>
		<p class="moeattention">
			<b>Внимание</b>: следует избегать использования атрибута <b>defer</b>,
			т.к. он может конфликтовать с <b>async</b> , а также вызвать повторную загрузку скрипта
			при использовании скомпилированных модулей и задагии атрибутов <b>src</b> в тегах скриптов.
		</p>
		<p>
			Атрибут <b>o5incls&nbsp;</b> (см. п.&nbsp;6.2) позволяет
			избежать компиляции невостребованных скриптов при включении в скомпилированный файл
			(или в секцию <b>html</b>) всех скриптов <i>библиотеки</i>,- независимо от
			необходимости каждого из них в данном модуле.
		</p>


		<h4 id='head_42'>4.2. Инициализация документа</h4>
		<p>
			Инициализация документа выполняется после наступления одного из событий,
			определённых параметром <b title="см. ниже п.&nbsp;6.2">o5init_events</b> и
			только для <i>новых страниц</i>, т.е. для документов, удовлетворяющих условиям:
		</p>
		<ul>
			<li><span title="т.е. значение 'document.documentURI'"><b>url</b>-адрес</span> документа должен отличаться
				от ранее загруженного;</li>
			<li>состояние <span title="т.е. значение 'document.readyState'">документа</span> д.б. одним из
				'<i>complete</i>', '<i>loaded</i>', '<i>interactive</i>';</li>

		</ul>
		<p>
			При этом для <i>новой страницы</i> (если таковая загружена)
			запускаются её инициализации поочередно каждым из <i>функциональных</i> скриптов:
		</p>
		<ul>
			<li>просматривается очередь загружаемых модулей
			</li>
			<li>если <i>очередной</i> модуль уже загружен
				и для него еще не запускалась инициализация для <i>этой</i> страницы,
				то вызвается его функция <b>W.Init</b>(),-
				инициализация <i>этого</i> <i>очередного</i> модуля
				(например см. <span o5popup='+../blog/olga5-all.html?o5nomnu#ks1; width: 666, height: 444'> стр. 22
				</span>)
			</li>
			<li>по завершении <b>W.Init()</b> генерируется соответствующее событие для <code>o5com!.js</code>
				(например см. <span o5popup='+../blog/olga5-all.html?o5nomnu#ks1; width: 666, height: 444'> стр. 31
				</span>)
			</li>
		</ul>
		</p>
		<p>
			Как правило каждый последующий скрипт будет запускаться лишь после сигнала завершения
			от <b>W.Init()</b> <i>очередного</i> модуля.
			Инициализация страницы считается завершённой, когда для всех <i>библиотечных</i> модулей поочерёдно
			выполнена функция <b>W.Init()</b>.
		</p>
		<p>
			При завершении работы <i>библиотеки</i> будет вызвана функция <b>W.Done</b>(),
			если она была задана в объекте <b>W</b>.
		</p>

		<h4 id='head_43'>4.3. Область действия инициализации</h4>
		<p>
			Скрипты выполняют свои действия
			<span title="исключение сделано для файлов, URL которых содержит слово 'olga5-tests'">только</span>
			на тех тегах <b><i>document</i></b>'а,
			которые находятся в блочных тегах (<u>включая</u> сами эти блочне теги) с классом
			<b>'olga5_Start'</b>.
			Например, таковым м.б. тег &lt;<b>body</b>&gt;.
			Обрамляя отдельные фрагменты документа тегами &lt;<b>div&nbsp;class="olga5_Start"</b>&gt; можно ограничить
			работу скриптов отдельными блоками (с возможностью уточнения каждому,- какими именно скриптами он может
			обрабатываться).
		</p>
		<p>
			Если в документе отсутствуют теги с классом <b>olga5_Start</b> то инициализация скриптов не выполняется.
			Если для тега после <b>olga5_Start</b> перечислены (через '<b>:</b>') квалификаторы (наименования модулей)
			то обработка этого тега будет позволена только для перечисленных модулей.
			Ну а если квалификаторы отсутствуют - всеми модулями <i>библиотеки</i>
			<!-- , а также в узлах, добавленных
			<i>библиотечными</i> API-функциями <b>AppendChild</b>() и <b>InsertBefore</b>(). -->
		</p>
		<p>
			Например, чтобы блок с <b>id</b>='snd_01' обрабатывался лишь только скриптом <code>o5snd.js</code>
			соответствующий тег может иметь вид:
		</p>
		<p class="olga5_codeTextSeparate">
			&lt;div id='snd_01' class="olga5_Start:<b>o5snd</b>&gt;"
		</p>
		<p>Пример задания нескольких блоков с различными <b>olga5_Start</b> и их обработки
			скриптами <code>o5snd.js</code> и <code>o5ref.js</code> можно посмотреть
			<code class="olga5_popup" onmouseup="window.olga5.PopShow( 655, 555, 'тесты+/all4.html')">здесь</code>.
		</p>

		<h3 id="head_5">5. API&nbsp;<i>библиотеки</i></h3>

		<p>
			Наряду с организацией выполнения подключаемых скриптов (при обновлении или <i
				title="например, в Blogger'е">смене</i>
			страницы)
			модуль <code>o5com!.js</code> предоставляет этим скриптам доступ к API&nbsp;<i>библиотеки</i>.
		</p>
		<p>
			Функции API доступны всем модулям через объект <b>C</b>
			(являющийся ссылкой на глобальный объект <span class='olga5_codeText'>const C = window.olga5.C</span>),
			который также передаётся модулям при их инициализации вызовом W.Init().
		</p>

		<h4 id='head_51'>5.1. Функции <i>библиотеки</i></h4>
		<ol>
			<li>инициализация подключаемых скриптов <b>ParamsFill</b>(W, o5css) &mdash; <i>инициализация и
					считывание</i> атрибутов для объекта&nbsp;<b>W</b>:
				<ul>
					<li>параметры задаются строковыи значениями <b>W.consts</b> и <b>W.urlrfs</b>,
						содержащими пары <i>имя</i>=<i>значение</i>, разделёнными символом '<b>;</b>'.
						<!-- При наличии '<b>=</b>' параметр считается необязательным,
						иначе при отсутствии в атрибутах его значения выдаётся сообщение об ошибке. -->
						Необязательная подстрока <i>значение</i> является значением по-умолчанию и,
						если она выражает число, то преобразуется в соответствующий
						(целый или действительный) тип.
						Все кавычки и 'непечатные' символы в начале и конце <i>значения</i> - игнорируются</i>;
					<li>параметр <b>o5css</b> является строкой, содержащей
						CSS-правила в стандартном виде.</i> и, при наличии непустого строкового значения <b>o5css</b>
						(содержащего <b>CSS</b>-атрибуты для модуля <b>modul</b> с классом <b>clasn</b> ),
						в секции <b>head</b> документа создаётся тег &lt;<b>style</b>&gt;, заполняемый
						этой строкой</li>
					<li>переопределяет (или создаёт) <b>W.consts</b> и <b>W.urlrfs</b>:
						сначала туда копируются общесистемные <b>C.consts</b> и <b>C.urlrfs</b>, потом
						дописываются параметры из подключаемого скрипта. При этом монстанты, заданные в адресной строке
						(после символа '<b>?</b>') не замещаются;
					</li>
					<li>
						В завершение вызывет <i>Object.freeze(<b>W</b>)</i>.
					</li>
				</ul>
			</li>
			<br>
			<li>расцвеченное логирование в <i>console.log</i>:
				<ul>
					<li><b>ConsoleError, ConsoleSign, ConsoleInfo</b> (txt, add, tab) &mdash; сообщение <b>txt</b>
						на (соответственно) желтом, синем и рыжем фоне;</li>
					<li><b>ConsoleAlert</b> &mdash; (txt, add, tab) сообщение <b>txt</b> о <i>серьёзной</i> ошибке - на
						желтом фоне и с
						синей рамкой.
						Дополнительно,- при задании <b>o5debug</b> > 1, загрузка страницы может прерываться сообщением
						<i><b>alert</b></i><b>(txt)</b>;
					</li>
				</ul>
				Все функции имеют аргументами (<b>txt</b>, <b>add</b>, <b>tab</b>), где <b>txt</b> - текст сообщения;
				<b>add</b> - необязательный текст, показываемый выделенным справа от основного;
				<b>tab</b> - необязательный объект или массив, элементы которого показываются в раскрываемой таблице.
			</li>
			<br>
			<li>декодирование именованных <i title="содержащих символ '+' либо не содержащих ни '.', ни '/'"
					class="olga5_popup"
					onmouseup="window.olga5.PopShow( 666, 555, '+./help/urlrfs.html?o5nomnu')">ссылок</i>:
				<ul>
					<!-- <li><b>IsUrlNam</b>(u) &mdash; проверка, что адрес (не содержащий символа '<b>+</b>') 
						является именованной ссылкой,- т.е. не содержит '<b>.</b>', '<b>/</b>' или '<b>#</b>'.
					</li> -->
					<li><b>DeCodeUrl</b>(w, url, o5attrs=<b>null</b>) &mdash; декодирование адресной
						<span title="содержащей разделительный символ '+'">строки</span> <b>url</b>
						используя ссылки, определённые для модуля <code>w</code>
						(и ядра <i>библиотеки</i>).
						При указании списка атрибутов <b>o5attrs</b> ссылки сначала ищутся среди них.
						<br />
						Адресные строки, начинающиеся '<b>data:</b>',- не декодируются (лишь усекаются).
						<br />
						Функция возвращает объект с полями:
						<ul>
							<li><b>url</b> - результатом декодирования и дополнительными полями;</li>
							<li><b>err</b> - текст о замеченной ошибке;</li>
							<li><b>num</b> - количество <i>ссылок</i> (в т.ч. на другие атрибуты).</li>
						</ul>
						Если значения ссылок в <u><b>url</b></u> совпада.т (игнорируя регистр и различие '-' и '_')
						с наименованием одного из теговых атрибутов
						(любого,- например <b>src</b> или <b>href</b>), то берётся значение этого атрибута
						(которое также м.б. ссылкой на другой трибут,- при зацикливании будет выдана ошибка '<i>цикл.
							ссылки</i>').
						Если слева от '<b>+</b>' отсутствуют непустые подстроки, то там предполагается значение
						<b>_url_olga5</b>.

						<p style="margin-block-end: 0em;">
							Если результирующий адрес <u>не начинается</u> с '<b>http:</b>' или '<b>https:</b>',
							либо с '<b>//</b>' и последующим '<b>localhost</b>' или 4-численным ip-адресом,-
							тогда:
						<ul>
							<li>если тег начинается символом '+ то добавляется (слева) значение <b>_url_olga5</b>;</li>
							<li>иначе - добавляется значение <b>_url_htm</b></li>
						</ul>
						где <i>добавляемые</i> значения определённое в <code>o5com!.js</code>.
						</p>
					</li>
					<li><b>DelBacks</b>(s0) &mdash; удаление подстрок '<b>./</b>' и '<b>../</b>', которые могут
						появиться
						в адресе после вставки <i>ссылок</i>.
					</li>
				</ul>
			</li>
			<br>
			<li>сервисные функции (основные):
				<ul>
					<li><b>GetAttribute</b>(attrs, name) &mdash; поиск значения атрибута '<b>name</b>')
						среди атрибутов объекта '<b>attrs</b>':
						<ul>
							<li>при наличии атрибута с именем '<b>name</b>' просто возвращается его значение</li>
							<li>иначе возвращается значение атрибута с именем '<b>name</b> плюс
								префикс <b>data-</b> или '<b>data_</b>' </li>
							<li>если все три атрибута отсутствуют, то возвращается <i><b>undefined</b></i></li>
						</ul>
					</li>
					<li><b>SplitParams</b>(str, parnam, dlms)  &mdash; разбивка строки '<b>str</b>'
						с наименованием (для логирования) параметра '<b>parnam</b> и резделителем имеющим вид
						<b>\s*[<i>dlms</i>]\s*</b>, где в квадратные скобки вставена строка '<b>dlms</b>'. 
						Т.е. разбивка будет выполнена по всем группам символов из '<b>dlms</b>' с окружающими его пробелами.
					</li>
					<li><b>MakeObjName</b>(obj, len) &mdash; формирование строки (длиной не меньше '<b>len</b>') с
						наименованием объекта '<b>obj</b>'. Необязательный параметр '<b>len</b>' -
						<i title="дополненная пробелами справа">минимальная длина</i> наименования
					</li>
					<li><b>IncludeScripts</b>({ modul = '', names = [], actscript = C.o5script, iniFun = {}, args = []
						}) &mdash; дозагрузка
						<i title="как, например, сделано в o5shp.js">дополнительных скриптов</i>, где
						<ul>
							<li><b>modul</b> - <u>уникальное</u> имя модуля,- вызывающего скрипта;</li>
							<li><b>names</b> - массив наименований загружаемых скриптов;</li>
							<li><b>actscript</b> - ссылка на загружающий скрипт, перед которым будут вставляться
								загружаемые скрипты.
								Умалчиваемым значением является '<b>C.o5script</b>' - скрипт, содержащий ядро
								библиотеки;</li>
							<li><b>iniFun</b> - ссылка на функцию (args), вызываемую после загрузки всех скриптов;</li>
							<li><b>args</b> - массив аргументов, передаваемых в <b>iniFun</b></li>
						</ul>
						Все скрипты, перечисленные в <b>names</b>, должны: либо находиться в подпапке <b>clasn</b>,-
						относительно папки размещения вызывающего скрипта,
						либо быть <span title="просто добавлены перед вызывающим файлом">скомпилированными</span> с ним
						в один файл.
						Функция <b>IncludeScripts</b> будет дозагружать скрипты если вызов <b>iniFun</b>(args),-
						дозагрузки выполняются асинхронно,- несколько модулей могут одновременно дозагружать свои
						<b>js</b>-файлы.
						Примеры вызовов можно посмотреть в скрипте <code>o5shp.js</code>.
					</li>
					<li><b>TagDes</b>(tag, ref, errs=null) &mdash; возвращает структуру с описанием адреса
						<b>ref</b> (который м.б. 'src' или 'href') у тега <b>tag</b>.
						При передаче массива <b>errs</b> в него будут записаны замеченные ошибки;
					</li>
					<li><b>ModulAdd</b>(W, pars) &mdash; информирование <code>ядра</code> о загрузке модуля с описателем <b>W</b>.
						Необязательный параметр <b>pars</b> содержит параметры, 
						(сразу) добавляемые в структуру модуля <span class='olga5_codeTextInline '>window.olga5[modul]</span>.
						<p class="moecomment">
							Данная структура содержит параметры, доступные извне <i>модуля</i>, 
							в частности функции инициализации подмодулей (см. ниже <i>ModulAddSub</i>).
						</p>
					</li>
					<li><b>ModulAddSub</b>(modul, sub, Fun) &mdash; информирование <code>модуля</code> 
						о загрузке его подмодуля <b>sub</b> с обязательной (впрочем, м.б. и заглушкой) функцией инициализации <b>Fun</b>,
						которая доступна извне <i>модуля</i> как 
						<span class='olga5_codeTextInline '>window.olga5[modul][sub]</span>. 
						Подробнее - см. примеры в папках <i>_url_olga5+/o5shp</i>, <i>_url_olga5+/o5dbg</i>, <i>_url_olga5+/o5snd></i>.
					</li>
				</ul>
			</li>
			<li>функции выборки тегов, являющиеся расширениями функций <i>селектором тегов</i>,
				в которых поиск ограничивается <i>контейнерами</i>
				с классом '<i>olga5_Start</i>' (см. выше п.&nbsp;4.).
				<div>Следующие функции
					<ul>
						<li><b>GetTagsByIds</b>(ids, <i>modul</i>) &mdash; где <b>ids</b> - список '<b>id</b>'
							тегов. Используется <i>querySelectorAll()</i>;
						</li>
						<li><b>GetTagsByQueryes</b>(queryes, <i>modul</i>) &mdash; где <b>queryes</b> - список
							из одного или нескольких селекторов. Используется <i>querySelectorAll()</i>;
						</li>
						<li><b>GetTagsByTagNames</b>(tagnams, <i>modul</i>)) &mdash; где <b>tagnams</b> - список имен
							тегов. Используется <i>getElementsByTagName()</i>;
						</li>
						<li><b>GetTagsByClassNames</b>(classes, <i>modul</i>)) &mdash; где <b>classes</b> - список
							классов. Используется <i>getElementsByClassNames()</i>;
						</li>
						<li>
						</li>
					</ul>
					имеют два входных строковых параметра:
					<ul>
						<li><span title="разделённых символом ';' (либо, при его отсутствии, - ',')">список </span>
							селекторов выборки </li>
						<li><span title="если не задано, то ищется внутри всех 'контейнеров'">необязательное</span>
							имя <b><i>modul</i></b>'я <i>библиотеки</i></li>
					</ul>
					и возвращают массив найденных тегов.
				</div>
				<div>
					Также имеется функция поиска с поддержкой наличия <i>квалификаторов</i> класса:
					<ul>
						<li>
							<b>SelectByClassName</b>(classnam, <i>modul</i>) &mdash; где <b>classnam</b> -
							наименование искомого класса (с необязательными <i>квалификаторами</i>),
						</li>
					</ul>
					возвращающая массив <u>объектов</u>, содержащих поля:
					<ul>
						<li><b>tag</b> - ссыылка на собственно тег</li>
						<li><b>quals</b> - массив <i>квалификаторов</i>, сопровождающих <i>classname</i> этого тега</li>
						<li><b>origcls</b> - оригинальный класс тега с квалификаторми (для сообщений об ошибках после
							обработки <b>quals</b>)</li>
					</ul>
					При выполнении этой функции у всех выбранных тегов (попавших в возвращаемый массим)
					в аттрибуте <b>class</b> квалификаторы у класса <i>classnam</i> -
					<b title="точнее,- удаляются лишь у первого из 'classnam' в атрибуте 'class'">удаляются</b>!
				</div>
				<p>
					Примеры выполнения эти пяти функций показаны
					<span o5popup='тесты+/sel1_.html; width: 666, height: 444'> здесь </span>
				</p>
				<p>
					В выборках функций <b>GetTagsByClassNames</b>() и <b>SelectByClassName</b>() исключаются
					теги, имеющие класс <b>olga5_IGNORE</b>, добавляемый, например, при клонировании объекта.
				</p>
			</li>
		</ol>

		<!-- =================================================================	 -->

		<h4 id='head_52'>5.2. События <i>библиотеки</i></h4>

		<p>
			<code>Ядро</code> <u>ожидает</u> следующие <b>window</b>-события:
		</p>
		<ul>
			<li>два <span title="вида CustomEvent(..., { detail: { modul: W.modul }">пользовательских</span>
				события обработки скриптов <i>библотеки</i>:
				<ul>
					<li><b>olga5_sload</b> &mdash; завершение загрузки каждого модуля (либо как отдельного скрипта,
						либо в скомпилированном скрипте);
					</li>
					<li><b>olga5_sinit</b> &mdash; завершение инициализации каждого модуля;
					</li>
				</ul>
			</li>
			<li>
				событие завершения (возможно, что <i>рекурсивных</i>) вставок фрагмендов документа из отдельных
				<b>html</b>-файлов:
				<b>olga5-incls</b>;
			</li>
			<li>
				две группы событий: для загрузки и для закрытия страницы, задаваемые (необязательными) параметрами
				<b>o5init_events</b> и <b>o5done_events</b>, описанные ниже п.&nbsp;6.2.
			</li>
			<!-- <li>
				события обработки страницы в <b>Blogger</b>'е:
				<ul>
					<li><b>transitionend</b> &mdash; завершение загрузки новой страницы (сообщения)
						после которого
						<span title="если URL документа заканчивается '.html'">может</span>
						выполниться инициализация страницы;
					</li>
					<li><b>transitionrun</b> и <b>message</b> &mdash; после (любого из) которых могут выполниться
						закрытие всех активированных на странице объектов и инициализация новой страницы;
					</li>
				</ul>
				<p class="moecomment">
					<b>Blogger</b> не генерирует предусмотренное для этих целей <b>document</b>-событие
					<b>visibilitychange</b>, а генерирует ли его аналог - не знаю.
				</p>
			</li> -->
		</ul>

		<p>
			<code>Ядро</code> <u>генерирует</u> два <b>window</b>-события для обработки сторонними скриптами:
		</p>
		<ul>
			<li><b>olga5_ready</b> &mdash; после завершения успешной инициализации всех задействованных модулей
				для обработки страниц иными (сторонними, например <code>o5mnu</code>) скриптами;
			</li>
			<li><b>olga5_done</b> &mdash; после закрытия текущей страницы или ухода с неё (например в <b>Blogger</b>'е).
			</li>
			<p class="moecomment">
				В <i>библиотеке</i> оба они используется при обработке вызываемых тестовых примеров.
				Хотя <b>olga5_done</b> можно использовать и в библиотечных скриптах, но там более логично задавать
				завершающую обработку в функции, определенной значением <i>Done:</i> параметра <b>W</b>.
			</p>
		</ul>

		<p>
			Открытие и закрытие страницы обрабатывается следующими событиями:
		</p>
		<ul>
			<li><b>o5init_events</b> &mdash;
				<span title="пояснение см. ниже">список</span> событий,
				по наступлении одного из которых может произойти инициализация страницы.

				Инициализация начинается по наступлении любого их перечисленных событий если дополнительно
				выполнено:
				<ul>
					<li>документ полностью <span
							title="т.е. для него выполняется document.readyState == 'complete'">загружен</span>;
					</li>
					<li>в документе <span title="оператором document.querySelector('.olga5_Start')">находится</span> тег
						с
						классом <b>olga5_Start</b></li>
				</ul>
				Инициализация не происходит, если не изменился адрес
				<span title="вследсвие ранее наступившего одного из этих событий">загруженного</span> документа.
				Если требуется гарантированно избежать инициализации то
				следует указать несуществующие наименования событий или задать атрибут <b>o5noact</b>.
				Умалчиваемое значение: "readystatechange:d, message";
				<br /><span class="moecomment">Событие <b>message</b> возникает в <b>Blogger'е</b> при смене
					отображаемой страницы.</span>
			</li>
			<li><b>o5hide_events</b> &mdash;
				<span title="пояснение см. ниже">список</span> событий смены активного
				<b>url</b>'а,
				например при бодгрузке новой страницы в <b>Blogger</b>'е'.

				Если при наступлении такого события изменяется <b>url</b> в адресной строке браузера,
				то происходит закрытие всплывших окон, текущего меню, etc.
				Умалчиваемое значение: "transitionrun";
			</li>
			<li><b>o5done_events</b> &mdash;
				<span title="пояснение см. ниже">список</span> событий на <b>window</b>'е,
				по наступлении одного из которых происходит закрытие окон и объектов.
				Умалчиваемое значение: "beforeunload, olga5_unload".
				<br /><span class="moecomment">Событие <b>olga5_unload</b> не создаётся в <i>библиотеке</i>, но
					предусмотрено для использования во внешних программах.</span>
			</li>
		</ul>

		<p>
			Списки являются строками, содержащими наименования событий, разделённые символом '<b>,</b>'.
			Чтобы задать где именно, на <b>window</b>'е или на <b>document</b>'е,- должно генерироаться событие,
			после его наименования следует указать квалификатор
			соответственно '<b>W</b>' или '<b>D</b>'. Например "readystatechange:d". Если квалификатор не
			указан, то
			события [<i>'DOMContentLoaded', 'readystatechange', 'visibilitychange', 'blur'</i>] будут
			генерироваться на <b>document</b>'е,
			а остальные - на <b>window</b>.
		</p>
		<!-- <p>
			Модули <i>библиотеки</i> генерируют три <b>window</b>-события:
		</p>
		<ul>
			<li><b>olga5_update</b> &mdash; генерируется и обрабатывается модулем <code>o5shp</code>
				после (отложенной) дозагрузки содержимого подвисабельных тегов <b>img</b> 
				(если таковые имеются);
			</li>
			<li><b>o5first_scroll</b> &mdash; генерируется и обрабатывается модулем <code>o5shp</code>
				после первого скроллина и сигнализирует окончание инициализации модуля <code>o5shp</code>;
			</li>
			<li><b>o5shp_scroll</b> &mdash; генерируется <code>o5shp</code> для
				информирования тестовых программ об окончинии обработки скроллина.
			</li>
		</ul>
		<p>
			Также обрабатываются события завершения загрузки документа,- веб-страницы или очередной страницы блога,
			описанные в пункте 4.2.
		</p> -->


		<h3 id="head_6">6. Атрибуты подключения скриптов и тегов</h3>
		<p>
			Параметры, необходимые для инициализации скриптов, могут, как правило, передаваться
			через <i>скриптовые атрибуты</i> <b>o5consts</b> и <b>o5urlrfs</b> (а также <b>o5depends</b>),
			которые могут содержать любое количество (соответственно) модульных <i>констант</i> и именованных
			<i class="olga5_popup" onmouseup="window.olga5.PopShow( 666, 555, '+./help/urlrfs.html?o5nomnu')">ссылок</i>,
			разделённых символом '<b>;</b>'. Примеры такой передачи параметров показаны в строках 9, 10 и 13 примера
			<span title="" class="olga5_popup"
				onmouseup="window.olga5.PopShow( 666, 555, '_url_html+./olga5-all.html?o5nomnu#head_21')">п.
				2.1</span>.
		</p>
		<p>
			Также для <span title="указанных в параметрах 'params' и 'urlrfs' структуры-ссылки 'W'">некоторых</span> 
			параметров предусмотрена передача их в виде отдельных <i>скриптовых атрибутов</i>.
			Например, константы <b>o5debug</b> и <b>_url_olga5</b> (из того же примера) могут быть заданы:
		</p>
		<p class="olga5_codeTextSeparate">
			&lt;script src='../olga5/<code>o5com!.js</code>' o5debug=1 _url_olga5 = '../olga5/'&gt;&lt;/script&gt;
		</p>
		<p>
			Если параметр определен как <i>атрибут</i>, то его присутствие в <b>o5consts</b> (или <b>o5urlrfs</b>)
			игнорируется.
			<b>В виде атрибутов</b> могут передаваться все <i>предопределённые</i> параметры ядра <i>библиотеки</i>
			(модуля <code>o5common</code>,- см. п.&nbsp;6.2),
			а также те параметры <i>функциональных</i> модулей, которые были изначально указаны в параметрах
			<b>params</b> и <b>urlrfs</b>
			<span title="" class="olga5_popup"
				onmouseup="window.olga5.PopShow( 666, 555, '_url_html+./olga5-all.html?o5nomnu#head_31')"><i>структуры-ссылки</i></span>,
			<b>W</b> на модуль.
		</p>
		<p>
			Для единообразия принято, что названия дополнительных атрибутов библиотечных скриптов начинаются символами
			'<b>o5</b>'.
		</p>
		<p>
			Атрибуты и параметры в них записываются в виде пар <i>имя атрибута/параметра</i> и его <i>значениие</i>,
			разделённых символом '<b>=</b>'.
			Имена атрибутов и параметров <span title="приводятся к нижнему регистру">регистронезависимы</span>,
			а символы '<b>-</b>' и '<b>_</b>' в их именах (но не в значениях) -
			<span title="внутри модулей такой символ '-' заменяется на '_'">эквивалентны</span>.
			<br />
			Для поиска значения атрибута используется нестандартная сервисная функция <b>GetAttribute</b>(tag, attr),
			описанная выше.
		</p>
		<p>
			У <u title="у атрибутов комментарии не допустимы">параметров</u> символ '<b>#</b>'
			в строке значения считается началом игнорируемого комментария,
			продолжающегося до разделяющего <span title="закрывающего контейнер-атрибут">символа</span> '<b>;</b>'
			или <span title="любые из ""'`">кавычки</span>.
			Комментарий не должен <span title="наряду с очевидными - кавычки и '<b>;</b>'">содержать</span>
			одиночный символ '<b>=</b>' -
			т.к. знак равенства всегда воспринимается как присвоение значения параметру/атрибуту и его
			появление в комментарии воспринимается как какая-то ошибка в их задании (однако можно писать '==', '===' и
			т.д.).
		</p>
		<p>
			Все любые кавычки (и пустые символы) в начале и конце строкового значения <i>параметра</i> игнорируются.
			Если значение <i>параметра</i>, заданного в атрибуте <b>o5consts</b>, отсутствует,
			то полагается равным '<b>1</b>'.
		</p>
		<p>
			Для совместимости с возможными ограничениями IDE блогостроительных оболочек
			имена атрибутов могут предваряться префиксом '<b>data-</b>'
			(например вместо <b>o5consts</b> можно писать <b>data-o5consts</b>).
			При наличии атрибута '<b>data-o5xxx</b>' простой атрибут '<b>o5xxx</b>' игнорируется.
		</p>

		<h4 id='head_61'>6.1. Параметры <i>функциональных</i> модулей</h4>
		<p>
			Все <i>функциональные</i> <u>скрипты</u> могут использовать <i>параметры</i> (т.е. <i>константы</i> и
			<i>ссылки</i>),
			заданные в их скриптовых атрибутах <b>o5consts</b> и <b>o5urlrfs</b>,
			а также в таких атрибутах скрипта <code>o5com!.js</code> или в адресной строке браузера.
		</p>
		<p>
			При задании <i>параметра</i> в разных местах для модуля наивысший приоритет имеет заданный в адресной
			строке,
			меньший - заданный в его &lt;<b>script</b>&gt; и наинизший - в скрипте <code>o5com!.js</code>.
		</p>
		<p>
			При <i>развёрнутом</i> подключении <i>функционального</i> модуля
			(см. п.&nbsp;<i class="olga5_popup"
				onmouseup="window.olga5.PopShow( 666, 555, '_url_html+./olga5-all.html?o5nomnu#head_22')">2.2.
				Компиляция скриптов</i> )
			параметры, определённые в соответствующем скрипте будут недоступны в остальных модулях
			(в отличие от определённых в <code>o5com!.js</code>).
		</p>
		<p>
			Примеры задания параметров <b>btn_play</b>, <b>moe-attr</b> (в виде отдельных атрибутов) в подключаемом
			скрипте <code>o5snd.js'</code>:
		</p>
		<table class="olga5_tableCode">
			<tbody>
				<tr>
					<td>
						<pre>&nbsp;<br/>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8</pre>
					</td>
					<td>
						<pre>
<span class="olga5_tableName">1. Атрибуты отдельных скриптов</span>
&lt;script src='<code>o5com!.js</code>' 
    <b>o5debug</b>=2
    o5urlrfs ='images=+ ../blog/media/image/'
&gt;&lt;/script&gt;
&lt;script data-src='+<code>o5snd.js'</code> 
    <b>btn_play</b>='images + /play.png'
    data-<b>moe-attr</b>='какое-то значение'
&gt;&lt;/script&gt;
</pre>
					</td>
				</tr>
			</tbody>
		</table>
		<p>
			Данный пример подключения атрибутов скрипта <code>o5snd.js</code> справедлив как для не скомпилированной
			<i>библиотеки</i>
			(с заданием <code>o5com!.js</code>), так и для скомпилированной, с заданием <code>o5.js</code>.
			В последнем случае присутствие тега &lt;<b>script</b>&gt; для <code>o5snd.js</code> служит лишь для указания
			принадлежности
			атрибутов, а сами эти атрибуты будут доступны только в модуле <code>o5snd</code>, включенном в
			<code>o5.js</code>.
		</p>
		<p>
			Здесь (демонстрационный) атрибут <b>moe-attr</b> дан в стр. 3 с необязательным префиксом '<b>data-</b>'
			просто как вариант записи.
			Параметр <b>o5debug</b> в стр. 6 задан в виде отдельного атрибута, а не значением (отсутствующего тут)
			атрибута <b>o5consts</b> - так допускается.
		</p>
		<p>
			Пример задания тех же атрибутов, указанных в скомпилированном скрипте <code>o5.js</code>:
		</p>
		<table class="olga5_tableCode">
			<tbody>
				<tr>
					<td>
						<pre>&nbsp;<br/>1<br/>2<br/>3<br/>4<br/>5<br/>6</pre>
					</td>
					<td>
						<pre>
<span class="olga5_tableName">2. Атрибуты скомпилированного скрипта<b>o5.js</b></span>
&lt;script src='<code>o5.js</code>' 
    <b>btn_play</b>='images + /play.png'
    data-<b>moe-attr</b>='какое-то значение' 
    <b>o5debug</b>=2
    o5urlrfs ='images=+ ../blog/media/image/'
&gt;&lt;/script&gt;
</pre>
					</td>
				</tr>
			</tbody>
		</table>
		<p>
			Тут <b>btn_play</b> и <b>data-moe-attr</b> будут доступны для всех модулей, включенных в <code>o5.js</code>.
		</p>

		<h4 id='head_62'>6.2. Атрибуты ядра <i>библиотеки</i></h4>
		<p>
			Данный скрипт может содержать следующие предопределенные скриптовые <i>атрибуты</i>:
		</p>
		<ol>
			<li>модульные <i>константы</i>.
				Список изначально содержит (для числовых параметров в скобках указаны значения по умолчанию):
				<ul>
					<li><b>o5debug &nbsp;&nbsp;</b> &mdash; ('0'),- числовой
						параметр [0&div;3], указывающий условную глубину отладочных сообщений.
						Если параметр имеет непредусмотренное значение (или задан без значения),
						то <b>o5debug</b> принимается <b>1</b>.
					</li>
					<li><b>o5nomnu &nbsp; &nbsp;&nbsp;</b> &mdash; ('0'),- отключает отображение встроенного меню и
						<i title="выделенные ссылки в тексте документа">всплывателей</i> в вызванных окнах
						(используется при вызове внешних ссылок во всплывающих окнах).
						Вычисляется аналогично <b>o5debug</b>.
						При нём тегу &lt;<b>body</b>&gt; добавляется класс 'o5nomnu',
						изменяющий его <b>CSS</b>-свойства (например, задаёт 'margin=0');
					</li>
					<li><b>o5noact &nbsp; &nbsp;&nbsp;</b> &mdash; ('0'),- отладочный параметр,
						<i title="например, для отладочном просмотре 'необработанных' страниц">отключающий</i>
						работу функциональных модулей. Вычисляется аналогично <b>o5debug</b>.
						Может использоваться, например, для оценки влияния работы скриптов на скорость открытия сайта;
					</li>
					<li><b>o5timload &nbsp;&nbsp;</b> &mdash; ('3') к-во секунд ожидания
						<span title="не включая время на их загрузку и иную обработку страницы">инициализации</span>
						всех вызываемых скриптов,
						по истечении которых может быть выдано (в <i>console.log</i>) сообщение об ошибке загрузки
						скриптов;
					</li>
					<li><b>o5only&nbsp;</b> &mdash; обрабатывать только те предшествующие теги &lt;<b>script&gt;</b>,
						в которых имена скриптов начинаются с '<b><i>o5</i></b>';
					</li>
					<li><b>o5incls&nbsp;</b> &mdash; список модулей, обрабатываемых <i>библиотекой</i>.
						Его наличие позволяет включать (при загрузке или в скомпилированный файл ) все скрипты,
						но инициализировать <i
							title="конролируются только модули, названия которых начинаются с 'o5'">лишь</i>
						перечисленные, исключая из работы <i>лишние</i> модули.
						Атрибут <b>o5incls</b> является дополнением к атрибуту <b>olga5_Start</b>'.
						Различие в том, что первый действует для всех страний, загружаемых после загрузки скриптов,
						в то время как второй - отрабатывает при каждой инициализации документа (что имеет место в
						<b>Blogger</b>'е).

					<li><b>o5doscr&nbsp;</b> &mdash; значение контрольного <i>атрибута</i> для повторного исполнения
						скриптов, встроенных в документ, значение по умолчанию - '<b>olga5_sdone</b>'.
						<p class="moecomment">
							Обычно повторное исполнение не требуется, т.к. встроенные скрипты выполняются соответственно
							их месту в теле документа. Обнако в <b>Blogger</b>'е их выполнение может 'проскакивать',
							т.к. в
							нем документ сначала загружается в память, а уж потому может отобразиться на экране.
							Использование же <b>o5doscr</b>'а как раз и позволяет выполнять скрипты при
							показе обновлённой страницы.
						</p>
						При (повторной) инициализации документа <code>ядро</code> проверяет наличие в
						<span o5popup='+../blog/olga5-all.html?o5nomnu#head_43; width: 666, height: 444'> обрабатываемой
						</span>
						его части тегов &lt;<b>script</b>&gt; и ищет в теле каждого оператор,
						"<i>document.currentScript.setAttribute</i>" задающий
						<i
							title="чтобы скрипт считался исполненным,- атрибуту должно задаваться значение '1'">атрибут</i>
						<b>olga5_sdone</b>.
						<span title="чтобы не тратить время на перебор всего содержимого тега">Желательно</span>,
						чтобы этот оператор располагался в начале скрипта.
						Если такой оператор (или <i>атрибут</i> <b>olga5_sdone</b>) найден, то при значении
						<i>атрибута</i> отличном от 1 скрипт снова выполняется
						(и при этом в нём оператор <i>setAttribute</i> выставит скрипту этот атрибут со значением '1').
					</li>
				</ul>
				<br />
				Перечисленные константы могут быть переопределены (в очерёдности возрастания приоритета):
				<ul>
					<li>как параметр скриптового атрибута <b>o5consts</b>;</li>
					<li>как отдельный скриптовый атрибут;</li>
					<li><span title='записанным(и) после символа ?'>параметром</span> адресной строки.</li>
				</ul>
				<p>
					Подробнее ознакомиться с переопределением (и заданием) констант можно на этом
					<span o5popup="'тесты+/all0_.html'; width: 533, height: 240; click" )>примере</span>.
					Для чего раскрыть в системном журнале отладчика сообщения, содержащие текст
					'<i>... <b>все константы</b> ...</i>' и сравнить их
					со значениями атрибутов файла примера и вызываемых в нём скриптов
				</p>
			</li>
			<p id='head_622'></p>
			<li>именованные адресные <i>ссылки</i> - <b>o5urlrfs</b>:
				<ul>
					<li><b>_url_html &nbsp;</b> &mdash; <b>url</b> или <i>ссылка</i> на
						данную HTML-страницу на сайте (по-умолчанию - значение <b>document.baseURI</b>);
					</li>
					<li><b>_url_root &nbsp;</b> &mdash; аналогично на корневую папку сайта (часть значения
						<b>document.baseURI</b>);
					</li>
					<li><b>_url_olga5&nbsp;</b> &mdash; аналогично на папку, в которой находится модуль/скрипт
						<code>ядра</code>
						(<code>o5.js</code>, <code>o5com!.js</code> или <code>o5com.js</code>).
						Подробнее о <b>_url_olga5</b> - ниже п.&nbsp;6.3.
					</li>
				</ul>
				<br />
				Эти ссылки могут быть также переопределены:
				<ul>
					<li>как параметр скриптового атрибута <b>o5urlrfs</b>;</li>
					<li>как отдельный скриптовый атрибут.</li>
				</ul>
			</li>
			<br />
			<li>
				зависимости между скриптами - <b>o5depends</b>, уточняющий очередность их инициализации.
				<p>
					Значением атрибута является строка, состоящая из <i>списков</i> слов-'имён&nbsp;модулей'
					разделённых '<b>;</b>'. В каждом списке первым словом указано имя
					модуля, для которого уточняется (см. чуть ниже) очерёдность его выпонения,
					а после символа '<b>=</b>' (или '<b>:</b>') - список модуей (разделённых '<b>,</b>'), от которых он
					зависит.
				</p>
				<p>
					По умолчанию <b>o5depends</b> = "<span class='inLine'>
						o5inc; o5pop:o5ref,o5snd; o5ref= o5inc; o5snd:o5ref; o5shp=o5snd, o5ref; o5mnu
					</span>", что соответствует требованиям к их очерёдности, описанным в
					<span class="olga5_popup"
						onmouseup="window.olga5.PopShow( 666, 555, '_url_html+./olga5-all.html?o5nomnu#depends')">
						п.&nbsp;1.1</span>.
				</p>
				<p>
					Все модули <u>обязательно</u> зависят от модуля <b>o5inc</b> и её можно не указывать. 
					Т.е. указание для <b>o5depends</b> (в предыдущем абзаце) "<i>o5ref= o5inc;</i>" является излишним.
				</p>
				<p class="moecomment">
					Также излишним для <b>o5pop</b> указана зависимость от <b>o5ref</b> 
					(в подстроке <i>o5pop:o5ref,o5snd;</i>), поскольку от него также зависит <b>o5snd</b>.
				</p>
				<p>
					Если имя загруженного модуля является первым в одном, или нескольких списках <b>o5depends</b>,
					то сей модуль должен дождаться окончания выполнения тех и только тех модулей,
					которые указанны во всех 'его' <i>списках</i>.
					Если модуль является единственным в <i title="т.е. во всех 'его' списках">списке</i>, то он
					выполняется сразу после загрузки.
				</p>
				<p>
					Если же имя загруженного модуля отсутствует среди первых в <i>списках</i>,
					а также при отсутствии (или пустом значении) атрибута <b>o5depends</b>, инициализация модуля
					будет выполняться в зависимости от наличия у него скриптового атрибута
					'<b
						title="атрибут 'async' учитывается только в этом случае отсутствия модуля в 'o5depends'">async</b>':
					либо сразу после его загрузки, либо
					по завершении выполнения всех предыдущих <i>библиотечных</i> скриптов,-
					согласно очередности их декларирования в секции &lt;<b>head</b>&gt; HTML-документа документа.
				</p>
				<p>
					Т.е. атрибут <b>o5depends</b> позволяет гибко обеспечить минимальные задержки между загрузками
					скриптов и их выполнениями при одновременном соблюдении желательной очередности их работы.
					В отладочном режиме (с o5debug > 0) проверяется возможность зацикливания и выдаётся сообщение об
					ошибке.
				</p>
			</li>
		</ol>

		<p>
			Модульные <i>константы</i> также могут
			<span title="глобально,- для всех модулей">переопределяться</span>
			в адресной строке браузера,- передачей параметров
			<span title="указаны после символа '?' и обязательно содержат '='">стандартным</span>
			способом. Например, в строке :
		</p>
		<p class="olga5_codeTextSeparate">
			https://rombase.h1n.ru/o5/2020/<b>olga5-com</b>.html?<b>o5timload</b>=5&<b
				title="тут не ошибка: параметры 'o5-debug', 'o5-mnu' и 'o5-act' могут писаться через дефис">o5-debug</b>=2&<b>o5nomnu</b>#head_2
		</p>
		<p>
			Здесь вызывается открытие страницы <b>olga5-all.html</b> с заданием значений параметров:
			<b>o5timload</b>=5 и <b>o5debug</b>=2
			(а также с позиционированием на теге с <b>id</b>='head_2').
		</p>
		<p class="moecomment">
			При использовании ссылок в документах <i>блога</i>, позиционирование (т.е. '<i>#head_2</i> ') обычно
			предваряется библиотечным
			параметром <b>o5nomnu</b> - для исключения отображения страничных меню во всплывающем окне.
		</p>
		<p>
			<b>Пояснения: </b>
		</p>
		<p>
			Как сказано в п.&nbsp;6.1 любые <i>параметры</i> работы скрипта могут задаваться в его <i>атрибутах</i>
			<b>o5consts</b> и <b>o5urlrfs</b>, которые могут (вообще говоря) содержать произвольное количество
			<i>параметров</i>, используемых в иных модулях <i>библиотеки</i>,- в т.ч. и названные выше <i>атрибуты</i>.
		</p>
		<p>
			При присвоении значений предопределенных атрибутов действуют приоритеты в зависимости от способа задания:
		</p>
		<ul>
			<li>в адресной строке;</li>
			<li>как скриптового атрибута;</li>
			<li>как один из параметров атрибута <b>o5consts</b>.</li>
		</ul>
		<p class="moecomment">
			При наличии атрибута и отсутсвии его значения предполагается, что оно равно '<b>1</b>'.
		</p>
		<p>
			Если атрибуты не были определены одним из этих трех способов, то принимаются их умалчиваемые значения.
			Атрибуты, значения которых заданы первым или вторым способами, <b>не</b> могут быть переопределены
			в других скриптах <i>библиотеки</i>.
		</p>


		<h4 id='head_63'>6.3. Использование параметра '<i>_url_olga5</i> '</h4>
		<p>
			Если слева от '<b>+</b>' отсутствует ссылка, то там предполагается наличие именно <b>_url_olga5</b>,
			с умалчиваемым значением равным адресу скрипта <code>ядра</code>.
		</p>
		<!-- <p class='moecomment'>
			Если теги &lt;<b>script</b>&gt; и &lt;<b>link</b>&gt; в атрибуте адреса содержат символ '<b>+</b>', то
			предполагается, что они содержат именованные ссылки, которые д.б. автоматически перекодированы.
		</p> -->
		<!-- =================================================================	 -->
		<p>
			Использование <b>_url_olga5</b> (с переопределением его значения) иллюстрируется
			<code class="olga5_popup" onmouseup="window.olga5.PopShow( 360, 200, 'тесты+/ext2.html?o5debug=1')">примером</code>
			<span title="обрабатываемых в <head> документа)">подключения</span> <b>JS</b> и <b>CSS</b> файлов, из
			которых:
		</p>
		<ul>
			<li><b>o5i<u>1</u>.css</b> &mdash; содержит только одно правило "<i>div {<b>background-color</b>: yellow;},
					создающее желтый фон блока</i>"
			</li>
			<li><b>o5i<u>2</u>.css</b> &mdash; аналогично "<i>div {<b>border-style</b>: double;}, создающее двойную
					рамку блока</i>"
			</li>
		</ul>
		<p>
			Файлы подключаются из различных источников и результативность их подключения наглядно видна на отображаемом
			HTML-кадре.
			Ниже приводится сопоставление заголовка исходного HTML-файла <i>примера</i>
			и результата его обработки, скопированного из закладки '<b><i>Elements</i></b>' окна отладчика
			(использовалcя браузер <b>Chrome</b>).
		</p>
		<div style="overflow: auto;" class="olga5_tableCode3 olga5_scroll">
			<!-- <div style="height:222px; overflow: auto;" class="olga5_tableCode3 olga5_scroll"> -->
			<table>
				<tr>
					<td style="max-width: 444px;">
						<div>
							<pre>
<span class="olga5_tableName">Исходное :</span>
&lt;script src='../olga5/o5com!.js'
    _url_olga5="<span style="background:yellow">https://rombase.<b>neocities.org</b>/o5/olga5/add/</span>"
&gt;&lt;/script&gt;

&lt;base href="<span style="background:fuchsia"><b>../</b>olga5/add/</span>"&gt;

&lt;link href=' + o5i1.css' media='screen' rel='stylesheet' /&gt;
&lt;script src=' + o5p1.js'&gt;&lt;/script&gt;

&lt;link href='o5i2.css' media='screen' rel='stylesheet' /&gt;
&lt;script src='o5p2.js'&gt;&lt;/script&gt;
</pre>
						</div>
					</td>
					<td>
						<div>
							<pre>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9<br/>10<br/>11</pre>
						</div>
					</td>
					<td style="width: auto;">
						<div>
							<pre>
<span class="olga5_tableName" style="float: left;padding-left: 12px;">Полученное: </span>
&lt;script src="../olga5/o5com!.js" 
    _url_olga5="<span style="background:yellow">https://rombase.neocities.org/o5/olga5/add/</span>"
&gt;&lt;/script&gt;
	
&lt;base href="../olga5/add/"&gt;

&lt;link href="<span style="background:yellow">https://rombase.neocities.org/o5/olga5/add/o5i1.css</span>" media="screen" rel="stylesheet"&gt;
&lt;script src="<span style="background:yellow">https://rombase.neocities.org/o5/olga5/add/o5p1.js</span>" async=""&gt;&lt;/script&gt;

&lt;link href="<span style="background:fuchsia">o5i2.css</span>" media="screen" rel="stylesheet"&gt;
&lt;script src="<span style="background:fuchsia">o5p2.js</span>"&gt;&lt;/script&gt;
</pre>
						</div>
					</td>
				</tr>
			</table>
		</div>

		<p>
			В примере использовались два <i>базовых</i> адреса (выделеных цветом) размещения файлов:
		</p>
		<ul>
			<li><b>"../olga5/add/"</b> &mdash; <span style="background:fuchsia">указанный</span> в
				теге &lt;<b>base</b>&gt;
				и используемый в адресах, начинающихся '<b>.</b>';</li>
			<li><b>"https://rombase.neocities.org/o5/olga5/add/"</b> &mdash; <span
					style="background:yellow">указанный</span> в параметре <b>_url_olga5</b> подключения
				<code>ядра</code>
				и подставляемый в адреса, начинающиеся '<b>+</b>'.
			</li>
		</ul>
		<p>
			Из примера <i title="отладчик браузера не показывает тут реальный url">(не)</i> видно, что файлы
			<b>o5i2.css</b> и <b>o5p2.js</b>
			берутся из первого адреса, подставляемого браузером автоматически. Проанализировать это
			можно на закладках '<b><i>Sources</i></b>' и '<b><i>Console</i></b>' отладчика браузера.
		</p>
		<p class="moecomment"> 
			Сообщение  об ошибке (последняя строка в <i>Console</i> на желтом фоне) можно игнорировать,
			т.к. тут обработка страницы не предусматривается.
		</p>
		

		<h3 id='head_7'>7. Применение <i>библиотеки</i></h3>

		<p>
			Различные версии данной <i>библиотеки</i> использовались при создании блогов:
		</p>
		<ul>
			<li><b><i>красный</i> блог</b>
				<a href="https://turkish4dummies.blogspot.com/" target="olga5-addPage">"Турецкий язык для (не)особо
					одаренных"</a>
			</li>
			<li><b><i>синий</i> блог</b>
				<a href="https://t4d2112273.blogspot.com/" target="olga5-addPage">"Турецкий язык для (не)особо
					одаренных-2"</a>
			</li>
			<li><b>опыт изучение турецкого</b>
				<a href="https://ariturlearn.blogspot.com/" target="olga5-addPage">"Изучая турецкий"</a>
			</li>
		</ul>
		<p>
			и, конечно,- в данном блоге.
		</p>
		<br />
		<!-- ===================================================================================== -->
		<pre id="menu-pre" class="olga5-menuhidden" style="display:none">
				{ span: 'Статья', id: "moemenu", right: '5px', top: '5px', add: '266px', },
					{ span: '1. Общие сведения', ref: 'head_1', add: '266px' },
						{ span: '1.1. Модули библиотеки', ref: 'head_11' },
						{ span: '1.2. Инкапсуляция CSS', ref: 'head_12' },
						{ span: '1.3. Использование именованных ссылок', ref: 'head_13' },
						{ span: '1.4. Системные требования', ref: 'head_14', ret: 1 },
					{ span: '2. Подключение тегов &lt;script&gt; и &lt;link&gt; `библиотеки`', ref: 'head_2', add: '266px' },
						{ span: '2.1. Пример подключения скриптов', ref: 'head_21', },
						{ span: '2.2. Компиляция скриптов', ref: 'head_22', },
						{ span: '2.3. Информирование об ошибках', ref: 'head_23', ret: 1 },
					{ span: '3. Создание новых скриптов', ref: 'head_3', add: '266px' },
						{ span: '3.1. Пример нового скрипта', ref: 'head_31', },
						{ span: '3.2. Пример подключения скрипта', ref: 'head_32' },
						{ span: '3.3. Подключение к тегам документа', ref: 'head_33', ret: 1 },
					{ span: '4. Организация выполнения скриптов', ref: 'head_4', add: '266px' },
						{ span: '4.1. Первый этап - загрузка', ref: 'head_41' },
						{ span: '4.2. Инициализация документа', ref: 'head_42' },
						{ span: '4.3. Область действия инициализации', ref: 'head_43', ret: 1 },
					{ span: '5. API&nbsp;&nbsp;<i>библиотеки</i>', add: '266px' },
						{ span: '5.1. Функции <i>библиотеки</i>', ref: 'head_51' },
						{ span: '5.2. События <i>библиотеки</i>', ref: 'head_52', ret: 1 },
					{ span: '6. Атрибуты скриптов и тегов', ref: 'head_6', add: '266px' },
						{ span: '6.1. Параметры <i>функциональных</i> модулей', ref: 'head_61' },
						{ span: '6.2. Атрибуты ядра <i>библиотеки</i>, ref: 'head_62' },
						{ span: '6.3. Использование  пераметра &nbsp;_url_olga5', ref: 'head_63', ret: 1 },
					{ span: '7. Применение  <i>библиотеки</i>', ref: 'head_7' },
			</pre>
	</div>
</body>

</html>