<!DOCTYPE html>
<html lang="ru">

<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8"
	Content-Security-Policy: default-src 'self' example.com *.example.com
	>
	<title>olga5-snd</title>
	<!-- <link rel="shortcut icon" href="+../blog/favicon.svg" type="image/x-icon"> -->
	<!-- <script src="https://rombase.h1n.ru/o5/olga5/o5dbg/events.js"></script> -->

    <link href='+../blog/favicon.svg' rel='shortcut icon' type='image/x-icon' />

	<!-- 
		src="../o5/olga5/o5.js"
		src='https://rombase.h1n.ru/o5/olga5/o5.js'
		src='http://localhost/o5/olga5/o5.js'  	
	-->
    <script src="http://localhost/o5/olga5/o5.js"
		o5debug="0"
        o5incls="o5pop,o5mnu,o5snd,o5shp,o5ref"
        o5urlrfs="
            _блог_o5 = \'_url_html+../2020/02\';
			media = + ../blog/media;
            sounds= media + /audio;
            images= media + /image;
            тесты = + ../olga5-tests;     
        " 
	></script>

	<link data-href="+o5ini.css" media="screen" rel="stylesheet" />
    
    <script data-src="+ o5inc.js"></script>
    <script data-src="+ o5shp.js"></script>
    <script data-src="+ o5pop.js" o5noclick="0"></script>
    <script data-src="+ o5mnu.js" o5consts="scrollY=-32"></script>
    <script data-src="+ o5ref.js" 
		o5tag_attrs="img=image_play;a,img,audio=href,data-href,src,_src;"
		o5urlrfs="  
			myTunes-icon=\'images + /myMusikIT.png\' # --- только для o5snd ---;
		"
	></script>
    <script data-src="+ o5snd.js" 
		btn_stop="images + /icons8-youtube-music-48.png" 
		btn_play="images + /icons8-youtube-music-50.png"
		o5consts="
			o5shift_speed =0.5 
		"
		o5urlrfs="
			Ceza1-25=sounds+/Ceza1-25.mp3;
			Ceza2-25=sounds+/Ceza2-25.mp3;
			imageplay=images + /play.png;
			solfedjio=images+ /solfedjio.png;
		"
	></script>
    <script data-src="+ add/pusto.js" moe-attr="мой атрибут"></script>

    <link data-href="+../blog/csss/olga5.tableCode.css" media="screen" rel="stylesheet" />
    <link data-href="+../blog/csss/olga5.textNshow.css" media="screen" rel="stylesheet" />
    <link data-href="+../blog/csss/olga5.addStyles.css" media="screen" rel="stylesheet" />
    <link data-href="+../blog/csss/olga5.menuPopDn.css" media="screen" rel="stylesheet" />
    <link data-href="+../blog/csss/olga5.tableKuplet.css" media="screen" rel="stylesheet" />
    <link data-href="+../blog/csss/tests.css" media="screen" rel="stylesheet" />

</head>

<body>
	<div class="olga5_Start:o5pop,o5ref:o5shp:o5snd:o5mnu" dir="ltr" trbidi="on">

		<img alt="" border="0" width="200" style="display:none"
			data-original-height="599" data-original-width="662"
			src="https://1.bp.blogspot.com/-rW1sKeagSVE/YEsS7GAONII/AAAAAAAAEQY/bSKdPPC_2ccI-0-0DFUfZt2QRRfjOW52QCPcBGAsYHg/s662/snd.png" 					
		/>
		<p class="olga5_page_header">
			Расширение использования стандартного аудиоплейера
		</p>

		<h3 id='snd_1'>1. Общие сведения</h3>
		<div>
			Скрипт <code>o5snd.js</code> входит в <i>библиотеку</i>
			<span o5popup='+ ./help/o5help.html; width: 430, height: 390'><code>Olga5</code></span>&nbsp;
			и добавляет к использованию стандартного аудиоплейера (тега &lt;<b>audio</b>&gt;) следующие
			возможности:
			<ul>
				<li>подключение вызова аудио-файлов к любым (<b>img</b>, <b>p</b>, <b>span</b> и т.д)
					тегам страницы (в дополнение к стандартному тегу &lt;<b>audio</b>&gt;);
				</li>
				<li>использование <i>именованных</i> ссылок в адресах аудио-файлов (например, при их нахождении на
					различных
					серверах);
				</li>
				<li>возможность отложенной загрузки аудиофайлов до момента обращения к ним,
					что снижает нагрузку на браузер при большом их количестве;
				</li>
				<li>синхронизация звучания,- когда запуск нового аудио-файла автоматически прекращает обработку
					предыдущего
					(как в &lt;<b>audio</b>&gt;, так и остальных тегах);
				</li>
			</ul>
			<p>
				Данный скрипт, подобно остальным скриптам <i>библиотеки</i>
				может быть подключен не только к отдельным HTML-страницам,
				но и функционировать внутри <b>Blogger</b>'а, в частности на шаблоне <i>Dynamic View</i>.
				Скрипт обрабатывает (наряду с &lt;<b>audio</b>&gt;) теги , у которых задан класс <b>olga5_snd</b>,
				находящиеся в
				<span o5popup='+../blog/olga5-all.html?o5nomnu#head_43; width: 666, height: 444'>областях&nbsp;действия</span>
				его инициализации.
				Скрипт должен использоваться обязательно в паре с ядром <i>библиотеки</i> <code>o5com!.js</code>.
				Для обработки именованных ссылок также (но не обязательно) может подключаться скрипт
				<span id='o5pop' o5popup='+../blog/olga5-ref.html?o5nomnu; width: 666, height: 444'> <code>o5ref.js</code>
				</span>.
			</p>
			<p>
				Пример подключения скрипта:
			</p>
			<table class="olga5_tableCode">
				<tbody>
					<tr>
						<td>
							<pre>&nbsp;<br/>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7</pre>
						</td>
						<td>
							<pre>
<span class="olga5_tableName">подключение скрипта в секции &lt;<b>head</b>&gt;</span>
&lt;script async src='olga5/o5snd.js'
    o5urlrfs="
        btn_play = _url_html + /media/image/play.png;
        btn_stop = _url_html + /media/image/play_Freepik.png
    "
&gt;&lt;/script&gt;
&lt;script async src='olga5/o5com!.js' o5debug=2 &gt;&lt;/script&gt;
</pre>
						</td>
					</tr>
				</tbody>
			</table>
			<p>
				Здесь в теге &lt;<b>script</b>&gt; в атрибуте <b>o5urlrfs</b> заданы параметры
				<b>btn_play</b> и <b>btn_stop</b>, содержащие ссылки на <i>умалчив1.1. Иллюстрацияаемые</i> изображения кнопок
				проигрывания
				звуков.
				Подробнее об использовании <i>атрибутов</i> и <i>параметров</i> написано
				<span o5popup='+../blog/olga5-all.html?o5nomnu#head_6; width: 666, height: 444'>здесь</span>).
			</p>
			<p>
				Чтобы т.с. <i>повесить</i> обработку аудио на произвольный тег (в теле документа), ему следует указать
				класс <b>olga5_snd</b>, после которого могут указываться уточняющие квалификаторы.
			</p>
			<p class="moecomment">
				Для клика по тегу &lt;<b>A</b>&gt; (с классом <b>olga5-snd</b>) первичным сделано управление звучанием,
				а переход по ссылке выполняться будет только при клике в <u>режиме&nbsp;'Pause'</u>.
			</p>

			<h4 id='snd_11'>1.1. Иллюстрация вариантов обработки аудио</h4>

			<style>
				#div1 {
					background-color: aliceblue;
					border: solid 1px lightgray;
					height: fit-content;
					display: block;
					padding: 4px;
					overflow: auto;
					max-width: fit-content;
					margin-left: 22px;
				}

				#div1 tr {
					white-space: nowrap;
				}

				#div1 table {
					border-spacing: 0.3em;
					border-bottom-style: double;
					border-bottom-color: lightgray;
				}

				#div1 tr:nth-child(odd) td:last-child {
					background-color: aliceblue;
				}

				#div1 tr:nth-child(even) td:last-child {
					background-color: blanchedalmon;
				}
			</style>
			<div id='ks1'>
				<p>
					Подключение аудио к произвольным тегам определяется наличием у них класса <b>olga5_snd</b>.
					Ниже показаны
					<span title="Иконки и ссылки в примерах - интерактивны - кликайте по ним">примеры</span> их
					использования:
				</p>
				<div id='div1' class="olga5_shp:Up:Top" olga5_frames="i:olga5-Start_hr,n" olga5_owners="id:ks1"
					style="height:255px;    padding-top: 3px;">
					<style>
						td>img {
							height: 32px;
						}
					</style>
					<table class="tableIllu">
						<tbody>
							<tr>
								<td>1</td>
								<td>
									<img class="olga5_snd:+Ceza1-25" title="img01" id="01" loop src="+ myTunes-icon" />
								</td>
								<td>&lt;<b>img</b> class="olga5_snd:+Ceza1-25"
									<b>src</b>= "+myTunes-icon"/&gt;
									<br />&nbsp;&nbsp;&nbsp;
									простейший пример для &lt;<b>img</b>&gt;,- звучание по клику, прекращение по уходу
									курсора.
								</td>
							</tr>
							<tr>
								<td>2</td>
								<td>
									<img class="olga5_snd:alive:'  +   Ceza1-25  '" title="img02" id='02' />
								</td>
								<td>&lt;<b>img</b>
									class="olga5_snd:alive:'&nbsp;&nbsp;+&nbsp;&nbsp;&nbsp;Ceza1-25&nbsp;&nbsp;'" /&gt;
									<br />&nbsp;&nbsp;&nbsp;
									не прерывается по уходу курсора; <b>src</b> не указан,- берутся <b>btn-stop</b> и
									<b>btn-play</b>
								</td>
							</tr>
							<tr>
								<td>3</td>
								<td><img class="olga5_snd:L:A:Ceza1-25" title="img03" id='03' src="+myTunes-icon"
										image_play="https://icons.iconarchive.com/icons/froyoshark/enkel/48/Spotify-icon.png" />
								</td>
								<td>&lt;<b>img</b> class="olga5_snd:L:A:Ceza1-25"
									<b>src</b>= "+myTunes-icon" <b>image_play</b>=".../Spotify-icon.png"/&gt;
									<br />&nbsp;&nbsp;&nbsp;
									зацикленное звучание по клику до следующего клика ('L'= 'loop', 'A'= 'alive')
								</td>
							</tr>
							<tr>
								<td>4</td>
								<td><img class="olga5_snd:over:sounds+Ceza2-25.mp3" title="img04" id='04'
										src="images+ /solfedjio.png" image_play=btn_play />
								</td>
								<td>&lt;<b>img</b> class="olga5_snd:over:sounds+Ceza2-25.mp3"
									<b>src</b>="images+ /solfedjio.png" <b>image_play</b>=btn_play/&gt;
									<br />&nbsp;&nbsp;&nbsp;
									однократное звучание (с изменением иконки) по наведению курсора.
								</td>
							</tr>
							<tr>
								<td>5</td>
								<td><img class='dlassaaa:A olga5_snd:over : a-11_z: loop :  "  sounds + Ceza1-25.mp3" '
										title="img05" id='05' _src=solfedjio />
								</td>
								<td>&lt;<b>img</b> class='dlassaaa:A
									<b>olga5_snd</b>:<b>o</b>ver&nbsp;:&nbsp;<b>a</b>Яё:&nbsp;<b>l</b>oop&nbsp; :&nbsp;&nbsp;
									"&nbsp;&nbsp; sounds + Ceza1-25.mp3" '
									<b>_src</b>=solfedjio/&gt;
									<br />&nbsp;&nbsp;&nbsp;
									зацикленное звучание по наведению курсора, не прерывается с его уходом.
								</td>
							</tr>
							<tr>
								<td>6</td>
								<td>
									<a id='6' class='olga5_snd:href' target="olga5-addPage" href="sounds+/Ceza1-25.mp3"
										title="кликни чтобы прослушать">&lt;<b>a</b>&gt;</a>
									<br />
									<a id='6a' class='olga5_snd:over:href' target="olga5-addPage" href=sounds+/Ceza1-25.mp3
										title="задержи курсор чтобы прослушать">&lt;<b>a</b>&gt;</a>
									<br />
									<b id='6b' class="olga5_snd:alive:'sounds+ /Ceza2-25.mp3'"
										title="кликни чтобы прослушать"
										style="background-color: transparent;">&lt;<b>b</b>&gt;
									</b>
								</td>
								<td>
									&lt;<b>a</b> class='olga5_snd:<b>href</b>' target="olga5-addPage"
									href="sounds+/Ceza1-25.mp3" &gt;
									<a id='7' class='olga5_snd:href' target="olga5-addPage" href="sounds+/Ceza1-25.mp3"
										title="кликни чтобы прослушать">кликнуть тут</a>
									&lt;/a&gt;
									<br />
									&lt;<b>a</b> class='olga5_snd:<b>over</b>:<b>href</b>' target="olga5-addPage"
									href=Ceza1-25 &gt;
									<a id='7a' class='olga5_snd:over:href' target="olga5-addPage"
										href="sounds+/Ceza1-25.mp3" title="задержи курсор чтобы прослушать">навести
										курсор</a>
									&lt;/a&gt;
									<br />
									&lt;<b>b</b> class="olga5_snd:alive:'sounds+/Ceza2-25.mp3'"&gt;
									<b id='7b' class="olga5_snd:alive:'sounds+/Ceza2-25.mp3'"
										title="кликни чтобы прослушать">кликнуть тут</b>
									&lt;/b&gt;
								</td>
							</tr>
						</tbody>
					</table>
					<table
						style="border-color: transparent; line-height: 1.1; width: 100%; font-size: smaller;max-width: 844px;">
						<caption style="text-align: left;text-align: -moz-left;text-align: -webkit-left;margin: 4px">
							Дополнительно показаны варианты подключения стандартных плейеров:
						</caption>
						<tbody>
							<tr>
								<td>
									<div><audio id="a1" controls="controls" class='olga5_snd:H'
											_src="sounds+/Ceza1-25.mp3">
										</audio></div>
								</td>
								<td>
									<div><audio id="a2" controls="controls" data-src="sounds+ Ceza2-25.mp3">
										</audio></div>
								</td>
							</tr>
							<tr>
								<td>
									здесь: <b>class</b>='olga5_snd:H' - игнорируется в <b>o5snd</b>
									<br />&lt;audio <b>_src</b>="sounds+/Ceza1-25.mp3"&gt;
									<br />атрибут <b>_src</b> будет обработан модулем <b>o5ref</b>
									<br />и 'сразу' заменит <b>src</b>.
								</td>
								<td>
									здесь: <b>class</b> - не задан,
									<br />&lt;audio <b>data-src</b>= &nbsp;"sounds+ Ceza1-25.mp3"&gt;.
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<p>
					Ниже - подробные описания этих примеров. Пояснения атрибутов и квалификаторов даны в
					<a href="#snd_4">п.&nbsp;4</a> ("Управление звучанием").
				</p>
				<ul>
					<li><b>1</b> &mdash; простейший вариант подключения со стандартным алгоритмом звучания.
						Однократное звучание начнётся после клика по изображению.
						Повторный клик по кнопке без увода курсора лишь приостановит звучание.
						Чтобы закончить звучание (и прекратить <i>покачивание</i> кнопки) следует убрать курсор с
						изображения этой кнопки.
						Теговый атрибут <b>image_play</b> (адрес иконки при звучании) тут не задан,
						поэтому при звучании будет показана иконка, заданная скриптовым параметром/атрибутом
						<b>btn_play</b> в теге скрипта для <code>o5snd.js</code>..
					</li>
					<li><b>2</b> &mdash; аналогичен предыдущему, но <i>квалификатор</i> <b>:Alive</b> сохраняет звучание
						после увода курсора.
						Здесь никак не задан адрес иконки, поэтому используются
						параметры <b>btn_stop</b> и <b>btn_play</b>. Чтобы прекратить звучание следует повторно
						<span title="т.е. поставить проигрывание 'на паузу'">кликнуть</span> иконку, а потом увести
						курсор.
					</li>
					<li><b>3</b> &mdash; зацикленное звучание (после клика) продолжается до следующего наведения курсора
						на кнопку и
						клика по ней.
						Повторный клик по кнопке без уведения курсора приостанавливает звучание (как и везде в этих
						примерах).
						При звучании изображение меняется на заданное в <b>image_play</b>;
					</li>
					<li><b>4</b> &mdash;
						однократное звучание начнётся после наведения курсора на изображение и будет прекращено после
						его уведения.
						Здесь атрибут <b>image_play</b> приравен <b>src</b> (см. ниже <i>Пояснение</i>), поэтому при
						звучании изображение
						<span title="оно лишь 'покачивается' за счет свойств CSS">почти</span> не меняется;

					</li>
					<li><b>5</b> &mdash;
						однократное звучание начнётся после наведения курсора на изображение и будет прекращено после
						его уведения.
						Здесь атрибут <b>image_play</b> не задан, поэтому при звучании <i>покачиваться</i> будет
						изображение, заданное атрибутом <b>btn_play</b> скрипта;
					</li>
					<li><b>6</b> &mdash; примеры внедрения аудио-ссылок непосредственно в теги оформления
						текста.
						В обоих примерах с &lt;<b>a</b>&gt; ссылка на аудио задана через теговый атрибут <b>href</b>.
						Здесь даны два варианта для иллюстрации отработки перехода по ссылке '<b>a</b>':
						в обоих случаях переход будет выполнен кликом по тегу <u>после</u> постановки звучания на паузу.
					</li>
				</ul>

				<p class='moecomment'>
					<b>Пояснения</b>:
				<ul class='moecomment'>
					<li> для атрибута <b>image_play</b> и квалификатора <b>audio_play</b> (см. ниже п.3) допускается
						присвоение
						<span
							title="наряду с абсолютными или относительными адресами и именованными ссылками">значения</span>
						<b>src</b> или <b>href</b> от <u>текущего</u> тега (даже если сами эти атрибуты
						были определены через префиксы '<b>_</b>' или '<b>data-</b>').
						Использование таких ссылок можно посмотреть
						<span class="olga5_popup" onclick="window.olga5.PopShow(  700, 466, 'тесты+/snd5.html')">
							тут</span>;
					</li>
					<li>если после открытияя страницы сразу навести курсор на тег с квалификатором <b>:over</b>,
						то звук может и не появиться. Причина - требование браузера о предварительной активации
						страницы (кликом, скроллингом...), о чем будет подсказано на всплывающей подсказке.</li>
				</ul>
				</p>
			</div>
			<p>
				Теги &lt;<b>audio</b>&gt; внизу <i>иллюстрации</i> подключены <u>без</u> использования класса
				<b>olga5_snd</b>.
				Однако скрипт всё равно синхронизирует их звучание, а для второго тега еще и обеспечивает
				<i>отложенную</i> загрузку файла.
			</p>
			<p>
				Остановка звучания выполняется уводом курсора, при  этом для тегов с квалификатором <b>alive</b>
				нужно сначала кликнуть по тегу, поставив звучание на паузу, и уже потом увести курсор.
				Также звучание останавливается двойным кликом на
				<span
					title="на неактивном месте страницы, иначе этот dblclick  м.б. перехвачен иным обработчиком">странице</span>,
				что полезно при зацикливании <i>непонятно-какого-аудио</i>.
			</p>
			<p>
				Нажатие клавиши <b>shift</b> при клике задаёт воспроизведение аудио с скоростью кратной 
				<b>o5shift_speed</b>
				(по умодчанию 0.5,- см. нтже п.2).
			</p>
			<p>
				<i>Скрипт</i> автоматически синхронизирует звучание всех тегов: как с классом <b>olga5_snd</b>,
				так и обычных тегов &lt;<b>audio</b>&gt;.
			</p>
			<p>
				Показанный выше пример (с дополнительными пояснениями) можно посмотреть
				<span class="olga5_popup" onclick="window.olga5.PopShow(  700, 488, 'тесты+/snd4.html')">
					тут</span> в виде отдельного файла. 
			</p>
			<p class="moecomment">
				Перед проверкой звучания по наведению курсора не забудьте активировать окно (например, кликом мыши).
			</p>
		</div>

		<h3 id='snd_2'>2. Атрибуты скрипта <code>o5snd.js</code></h3>
		<div>
			<p>
				Дополнительный атрибут <b>o5consts</b> может может содержать параметры:
			</p>
			<ul>
				<li><b>o5shift_speed</b> &mdash; относительная скорость проигрывания аудио
					при нажатой клавише <b>shift</b> в момент клика по аудио-ссылке,- не менее 0.2, по умолчанию= 0.5;
				</li>
				<li><b>o5return_time </b> &mdash; возврат по времени в
					<span title="значениие с плавающей точкой от 0.01 секунды">секундах</span>
					при возобновлении звучания после паузы .
				</li>
			</ul>
			<p>
				Дополнительный атрибут <b>o5urlrfs</b> может может содержать параметры:
			</p>
			<ul>
				<li><b>btn_play</b> &mdash; ссылка на изображение `кнопки` когда звучит аудио;</li>
				<li><b>btn_stop</b> &mdash; аналогично,- когда звучание остановлено
			</ul>
			<p>
				Эти параметры применяются только для тех &lt;<b>img</b>&gt; тегов, у которых отсутствуют как атрибут
				<b>src</b>
				так и его <i>заменители</i>: <b>_src</b> и <b>data-src</b>.
			</p>
			<p>
				Изображения, определённые данными параметрами, загружаются однократно при первом их использовании.
				Для совместимости с предыдущей версией <i>библиотеки</i>
				их можно также задавать как обычные атрибуты скрипта,
				при этом в их именах символы '<b>-</b>' и '<b>_</b>' эквивалентны.
			</p>
		</div>

		<h3 id='snd_3'>3. Подключение аудио-файлов</h3>
		<div>
			<p>
				Для подключения аудиофайлов к произвольным, отличным от &lt;<b>audio</b>&gt;) тегам
				последние должны содержать класс <b>olga5-snd</b>,
				позволяющий выбрать их для обработки скриптом.
			</p>
			<p>
				Этот класс может содержать несколько из пяти (необязательных) квалификаторов, управляющих звучанием (см.
				ниже п.&nbsp;4),
				и адрес подгружаемого аудио-файла - обобщенно называемый <i>квалификатором</i>
				'<b title="Рекомендуется заключать его в парные кавычки">audio_play</b>'.
			</p>
			<p>
				Значение <b>audio_play</b> будет загружено браузером после
				<span title="т.е. наведения на тег курсора мыши">активации</span> тега.
				При этом (при необходимости) предварительно будет выполнена подстановка именованных ссылок.
			</p>

			<h4 id='snd_31'>3.1 Особенности подключение к &lt;<b>audio</b>&gt;</h4>

			<p>
				Для тегов &lt;<b>audio</b>&gt; наличие класса <b>olga5-snd</b> не обязательно,
				(при задании у них - он игнорируется), а их участие в синхронизации
				звучания и обработка в них именованных ссылок выполняются автоматически.
			</p>
			<p>
				Кроме стандартного атрибута <b>src</b> у этих тегов могут использоваться атрибуты:
			<ul>
				<li><b>_src</b> во избежание собщений '404' при наличии именованных ссылок;</li>
				<li><b>data-src</b> для отложенной загрузки (эквивалент квалификатора <b>audio_play</b>).</li>
			</ul>
			</p>
			<p class='moecomment'>
				Наличие атрибута <b>_src</b> игнорирует атрибут <b>src</b>, а <b>data-src</b> - игнорирует
				оба атрибута <b>src</b> и <b>_src</b>.
			</p>
			<p>
				Демонстрация различных вариантов отложенного подключения тегов &lt;<b>audio</b>&gt; показана в
				<code class="olga5_popup"
					onclick="window.olga5.PopShow( 500, 400, 'тесты+/snd1.html')">примере</code>.
				Для просмотра (желательно НЕ в браузере FireFox, т.к. в нём теги &lt;<b>audio</b>&gt; плохо
				отрисовываются) следует кликнуть
				по ссылке, а для анализа - посмотреть в отладчике исходный код примеров.
			</p>

			<h4 id='snd_32'>3.2. Особенности подключение к &lt;<b>img</b>&gt;</h4>
			<p>
				Поскольку тег &lt;<b>img</b>&gt; в общем-то должен иметь чуть более <span
					title="'stop', 'play' и м.б. 'pause'">двух</span> состояний отображения звучания аудио-файла,
				то и хранить он должен (в общем случае) хотя бы два изображения.
			</p>
			<p>
				В скрипте предусмотрены две ссылки на изображение:
			</p>
			<ul>
				<li> при выключенном звучании,- задаётся (необязательным) стандартным атрибутом
					<b>src</b>
					(либо его <i>подменителем</i>: <b>_src</b> или <b>data-src</b>);
				</li>
				<li> при звучании (или паузе) аудио-файла,- задаётся (необязательным) дополнительным атрибутом
					<b>image_play</b>;
				</li>
			</ul>
			<p>
				Подключение к тегу &lt;<b>img</b>&gt; в общем случае может иметь вид:
			</p>
			<table class="olga5_tableCode">
				<tbody>
					<tr>
						<td>
						</td>
						<td>
							<pre>
&lt;img id = "a-02" title = "пример подключения"
    <b>class</b> = "olga5_snd:over:sounds+/gitme.mp3"
    <b>src</b> = "https://icons.iconarchive.com/icons/froyoshark/enkel/48/iTunes-icon.png"
    <b>image_play</b> = "https://icons.iconarchive.com/icons/froyoshark/enkel/48/Spotify-icon.png"
/&gt;
</pre>
						</td>
					</tr>
				</tbody>
			</table>
			<p>
				где показаны <span title="специфические для библиотеки">следующие</span> атрибуты тега <b>img</b>:
			</p>
			<ul>
				<li><b>class</b> &mdash; должен содержать класс <b>olga5_snd</b> с
					<i>квалификаторами</i>, из которох <b>audio_play</b> - необходимая ссылка на аудиофайл;
				</li>
				<li><b>src</b> &mdash; необязательный адрес изображения при выключенном звучании;
				</li>
				<li><b>image_play</b> &mdash; необязательный адрес изменённого изображения при звучании аудио-файла;
				</li>
			</ul>
			<p>
				Если теговый атрибут <b>src</b> отсутствует либо равен <b><i>'about:blank'</i></b>, то
				программа попытается присвоить ему значение скриптового атрибута <b>btn_stop</b> или <b>btn_play</b>.
			</p>
			<p>
				<u><b>Существенно</b></u>, что использование (в данном модуле) <b>btn_stop</b> и <b>btn_play</b>,
				а также <b>_src</b> или <b>data-src</b>,
				позволяет однократно загружать изображения с одинаковым полным <b>url</b>'ом для разных тегов
				даже при использовании сторонних хостов.
			</p>
			<p>
				Демонстрация и объяснение различных вариантов подключения аудио к <b>img</b>-тегам показаны
				<code class="olga5_popup"
					title="Просмотр - клик по ссылке, анализ - см. в отладчике исходный код примеров"
					onclick="window.olga5.PopShow( 700, 370, 'тесты+/snd2.html')">тут</code>
				(демонстрируется манипуляция иконками,- файл <b>snd2</b>.html).
			</p>
			<p>
				По умолчанию все иконки, используемые в <i>аудио</i>тегах <b>img</b> ограничиваются
				<b>CSS</b>-свойствами, прошитыми в скрипте:
			</p>
			<table class="olga5_tableCode">
				<tbody>
					<tr>
						<td>
							<pre>&nbsp;<br/> <br/>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9</pre>
						</td>
						<td>
							<pre>
<span class="olga5_tableName">стили подключения тега &lt;<b>img</b>&gt;</span>
img.olga5_shp:not(.<b>olga5-freeimg</b>) {
    background-color: transparent;
    position: inherit;
    padding: 0 !important;
    vertical-align: bottom;
    border-radius: 50%;
    box-shadow: none !important;
    animation: none;
    max-height: 28px;
    max-width:  28px;
}
</pre>
						</td>
					</tr>
				</tbody>
			</table>
			<p>
				откуда видно, что для отмены использование данного <b>CSS</b>'а следует (к классам этого тега)
				добавить класс <b>olga5-freeimg</b>. Тот же эффект будет если
				в теговом классе <b>olga5_snd</b> указать уточняющий квалификатор <b>F</b><i>reeImg</i>.
				Впрочем, можно просто задавать тегу конкретные стили атрибутом <b>style</b>.
			</p>
		</div>

		<h3 id='snd_4'>4. Управление звучанием</h3>
		<div>
			<p>
				Отображение состояния тегов проигрывании аудио, определяется <b>CSS</b>-правилами, прошитыми в файле
				o5snd.js (в составе данного модуля). Изменить их можно только редактированием этого файла.
				Впрочем, после подстановки значений в названия атрибутов, эти правила могут быть выделены в отдельный
				CSS-файл для подключения через тег &lt;<b>link</b>&gt;.
			</p>
			<p>
				<i>Умалчиваемое</i> поведение для объекта класса <b>olga5_snd</b>:
			</p>
			<ul>
				<li>клик мышкой вызывает звучание аудиофайла (после его загрузки);</li>
				<li>звучание (а также его визуализация) прекращаются после увода курсора мыши или окончания аудиофайла;
				</li>
				<li>последующие клики (если не было <i>увода</i> курсора) приостанавливают либо продолжают
					<span title="при этом визуально объект показывается как звучащий">звучание</span>;
				</li>
				<li>при звучании аудио тег как бы 'покачивается';</li>
				<li>при загрузке аудио и при его звучании курсор имеет вид '<i>progress</i>', а при паузе -
					'<i>wait</i>';</li>
			</ul>
			<b class='moecomment'>Пояснения</b>:
			<ul class='moecomment'>
				<li> при <i>продолжении</i> (после паузы) звучание начнется не с момента прерывания,
					а чуть-чуть раньше. В <i>библиотечном</i> <b>css</b> это <i>чуть-чуть</i> определяется скриптовым
					атрибутом
					<b>o5return_time</b>= 0.3с;
				</li>
				<li>для тега <b>A</b> <i>продолжение</i> (после паузы) звучания невозможно.
					Потому, что клик на этом теге в режиме 'Pause' вызовет переход по ссылке.</li>
			</ul>

			<p>
				Для изменения <i>умалчиваемого</i> поведения в классе <b>olga5_snd</b> используются уточняющие
				квалификаторы:
			</p>
			<ul>
				<li><b>A</b><i>live</i> - (2,3,6б) звучание не прекращается после <i>увода</i> курсора с тега
					;</li>
				<li><b>L</b><i>oop</i> - (3,5) звучание зацикливается;</li>
				<li><b>O</b><i>ver</i> - (4,5,6a) звучание
					<span title="предварительно страница д.б. активирована">начинается</span> по наведению курсора.
				</li>
				<li><b>F</b><i>ree</i> - не использовать встроенный класс <b>olga5_snd</b> для отображения тега;</li>
				<li><b>N</b><i>one</i> - не обрабатывать звучание, однако использовать встроенный класс <b>olga5_snd</b>
					для отображения тега;</li>
			</ul>
			Здесь в скобках указаны соответствующие номера
			<span id="snd_11s" class="olga5_popup"
				onClick="window.olga5.PopShow( 940, 455,'#snd_11')"><u>иллюстрации&nbsp;1.1</u></span>,
			приведенной выше.
			<p>
				Если наименование <i>квалификатора</i> начинается не с одной из перечисленных букв, либо
				если оно заключено в <span title="любые одинаковые из `'\">"парные</span> кавычки, то считается,
				что это есть квалификатор <b>audio_play</b>, задающий наименование проигрываемого файла.
			</p>
			<p>
				Квалификаторы разделяются (и отделяются от названия класса) символом ':', регистр букв игнорируется,
				пробелы допускаются, обязательной является только первая буква.
				Примеры, где жирным выделен квалификатор <b>audio_play</b>:
			<ul>
				<li><i title="тут таки можно не давать кавычки, т.к. конфликты отсутствуют ">olga5_snd :over
						:<b>имя_аудио_файла </b>: loop : alive</i> ;</li>
				<li><i title="здесь кавычки обязательны, т.к. значение содержит символ ':'">olga5_snd
						:<b>'https://archive.org/download/clouds_20200310/Ceza1-25.mp3'</b>:O:L:A</i>..</li>
			</ul>
			</p>
			<p class="moeattention">
				В <b>audio_play</b> могут использоваться именованные ссылки, определённые <u>в&nbsp;ядре</u> <i>библиотеки</i>
				<br/>
				<span class='moecomment'>
				(не допустимо их определение в модуле <code>o5ref</code> т.к. он не может обработать атрибут <b>class</b>)</span>. 
			</p>
			<p>
				Если не указано значение <b>:Alive</b>, то, при уводе курсора в режиме без <b>:Over</b>, звучание
				продолжается, а в режиме с <b>:Over</b> - прекращается.
				Однако, увод курсора во время паузы (после клика) всегда приведёт к прекращению звучания - независимо от
				наличия <b>:Alive</b>.
			</p>
			<p class='moecomment'>
				<em>Пояснение</em>: квалификаторы действуют только при инициализации тегов после чего удаляются из
				<b>className</b> тега.
			</p>
			<p>
				При отсутствии атрибута
				<span
					title="д.б. либо аключен в кавычки, либо начинаться не с 'A', 'O', 'L', 'F' или 'N'"><b>audio_play</b></span>
				и не заданном <b>N</b><i>one</i> выдаётся сообщение об ошибке
				и происходит отключение событий тега,- звучания не происходит,
				только визуальное <span title="например,- в пояснениях в примерах">отображение</span> ;
			</p>
			<p>
				Динамическое изменение вида тегов выполняется (согласно <b>CSS</b>-правилам) добавлением/удалением
				отображающих классов:
			</p>
			<ul>
				<li><b>olga5_snd_play</b> &mdash; добавляется (к классам тега) перед началом звучания,- меняет тип
					курсора на <i>progress</i>
					и <i>визуализирует</i> звучание, в частности, создаёт эффект "покачивания" кнопок;</li>
				<li><b>olga5_snd_pause</b> &mdash; добавляется при клике во время звучания,- меняет тип курсора на
					<i>wait</i>;
				</li>
				<li><b>olga5_snd_error</b> &mdash; добавляется при ошибке проигрывания аудио-файла,- создаёт
					<i>затемнение</i> аудио-тега.
				</li>
			</ul>
			<p>
				При звучани тега его громкость может изменяться нажатием клавиш "со стрелками" в пределах от 20% до
				100%.
			</p>
			<p>
				Двойной клик на странице или переход на другую страницу прекращают звучание.
			</p>
			<p>
				Чтобы прервать звучание из другого модуля необходимо сгенерировать событие '<b>olga5_stopPlay</b>', например:
			</p>
		<p class="olga5_codeTextSeparate">
			window.dispatchEvent(new CustomEvent('olga5_stopPlay', { detail: { tag: null, type: '', } }))
		</p>
		</div>

		<h3 id='snd_5'>5. Анализ ошибок</h3>
		<div>
			<p>
				При возникновении ошибки программа <i>затемнит</i> изображение аудио-тега, а в его атрибут <b>title</b>
				пропишет
				краткую информацию об ошибке,- которая будет <i>всплывать</i> при последующих наведениях курсора.
				Если причиной ошибки могло быть плохое интернет-соединение, то следует повторять попытки <i>озвучки</i>.
			</p>
			<p>
				Если же проигрывание аудио не выполняется и/или в <b>console.log</b> выдаётся (уже после сообщения
				об <i>инициализации</i>" модуля <code>o5snd</code>) 404-я ошибка,
				то в HTML-документе нужно найти и проанализировать все те строки, в которых определяется этот
				<b>url</b>.
			</p>
			<p>
				Для облегчения поиска причин ошибок следует задавать атрибут <b>id</b> для обрабатываемых тегов.
				В листинге программы раскрыть группу <span title="выделены тёмным фоном">сообщений</span> "Выполнено
				подстановок для тегов",- для данного скрипта
				и для <code>o5ref.js</code>, если он подключен. В открывшихся таблицах проверить правильность
				сформированных
				<b>url</b>'ов.
				Вплоть до ручной компоновки результирующего <b>url</b> и проверки его в отдельном окне браузера.
			</p>
			<p>
				Если подключается скрипт <code>o5ref.js</code>, то также следует проверить определение
				<i>именованных</i> ссылок
				в группе сообщений "Результирующие именованные ссылки".
				Подробнее об анализе ошибок в <i>именованных</i> ссылках написано в документации по
				<code class="olga5_popup"
					onclick="window.olga5.PopShow( 940, 444, '_url_olga5 + ../blog/olga5-ref.html?o5nomnu#head_4')">o5ref.js</code>.
			</p>
			<br />
		</div>
		<!-- ===================================================================================== -->
		<pre id="menu-pre" class="olga5-menuhidden" style="display:none">
			{ span: 'Статья', id: "moemenu", right: '5px', top: '5px', add: '233px', small: '1' },
				{ span: '1. Общие сведения', ref: 'snd_1', add: '333px' },
					{ span: '1.1. Иллюстрация вариантов обработки аудио', ref: 'snd_11', ret: '1' },
				{ span: '2. Атрибуты скрипта o5snd', ref: 'snd_2' },
				{ span: '3. Подключение аудио-файлов', ref: 'snd_3', add: '333px' },
					{ span: '3.1. Особенности подключение к &lt;audio&gt;', ref: 'snd_31', },
					{ span: '3.2. Особенности подключение к  &lt;img&gt;', ref: 'snd_32', ret: '1' },
				{ span: '4. Управление звучанием', ref: 'snd_4' },
					{ span: '5. Анализ ошибок', ref: 'snd_5' },
		</pre>
	</div>
</body>

</html>